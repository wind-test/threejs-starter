{"version":3,"sources":["pages/chapter1-2/index.tsx","pages/chapter11-1/index.tsx","pages/chapter11-2/index.tsx","pages/chapter12-1/index.tsx","pages/chapter12-2/index.tsx","pages/chapter2-1/index.tsx","pages/chapter2-2/index.tsx","pages/chapter2-3/index.tsx","pages/chapter3-1/index.tsx","pages/chapter3-2/index.tsx","pages/chapter4-1/index.tsx","pages/chapter4-2/index.tsx","pages/chapter4-3/index.tsx","pages/chapter4-4/index.tsx","pages/chapter4-5/index.tsx","pages/chapter4-6/index.tsx","pages/chapter5-1/index.tsx","pages/chapter5-2/index.tsx","pages/chapter5-3/index.tsx","pages/chapter6-1/index.tsx","pages/chapter6-2/index.tsx","pages/chapter6-3/index.tsx","pages/chapter7-1/index.tsx","pages/chapter9-1/index.tsx","pages/chapter9-2/index.tsx","pages/ScrollFull3d/index.tsx","pages/chapter1-1/index.tsx","pages/chapter10-1/index.tsx","pages/chapter10-2/index.tsx","pages/chapter11-1/shader/vertex.js","pages/chapter11-1/shader/fragment.js","pages/chapter11-2/shader/vertex.js","pages/chapter11-2/shader/fragment.js","pages/chapter12-1/shader/fragment_1.js","pages/chapter12-1/shader/vertex.js","pages/chapter12-1/shader/fragment_2.js","pages/chapter12-1/shader/fragment_3.js","pages/chapter12-1/shader/fragment_4.js","pages/chapter12-1/shader/fragment_5.js","pages/chapter12-1/shader/fragment_6.js","pages/chapter12-2/shader/vertex.js","pages/chapter12-2/shader/fragment.js","pages/chapter8-1/index.tsx","consts/menu.ts","utils/useSelectedMenu.ts","components/SideMunu.tsx","components/PageHeader.tsx","consts/pages.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["scene","renderer","camera","controls","axesHelper","clock","mesh","points_1","points_2","points_3","points","geometry","material","rayCaster","mouse","redMaterial","Title","Typography","Chapter1_1","Text","Paragraph","style","padding","level","Chapter1_2","ref","useRef","size","useSize","useEffect","THREE","color","add","point","position","set","ambient","current","appendChild","domElement","initThree","width","height","Number","k","s","lookAt","setSize","setClearColor","render","changeSize","id","Chapter10_1","canvas","document","getElementById","gl","getContext","viewport","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","useProgram","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","vertices","Float32Array","bufferData","STATIC_DRAW","a_Position","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","drawArrays","TRIANGLES","Chapter10_2","scale","x","y","z","animate","mat","u_Mat","getUniformLocation","uniformMatrix4fv","requestAnimationFrame","Chapter11_1","update","fullScreen","fullscreenElement","exitFullscreen","requestFullscreen","shaderMaterial","window","innerWidth","innerHeight","OrbitControls","addEventListener","removeEventListener","aspect","updateProjectionMatrix","setPixelRatio","devicePixelRatio","Chapter11_2","texture","load","rawShaderMaterial","side","uniforms","uTime","value","uTexture","elapsedTime","getElapsedTime","FragmentShader_1","Chapter12_1","params","ShaderMaterial","uColor","uFrequency","uScale","transparent","GUI","name","onChange","needsUpdate","Chapter12_2","RGBELoader","loadAsync","then","mapping","background","environment","alpha","outputEncoding","toneMapping","toneMappingExposure","GLTFLoader","gltf","children","i","flyLight","clone","Math","random","gsap","to","rotation","PI","duration","repeat","yoyo","Chapter2_1","Chapter2_2","time","offSet","stop","start","Chapter2_3","console","log","panel","visible","addColor","v","positionPanel","addFolder","min","max","step","Chapter3_1","normals","indexes","Uint16Array","setAttribute","index","Chapter3_2","triangleVertices","push","wireframe","Chapter4_1","useState","loadTip","setLoadTip","loadingManager","onStart","url","itemsLoaded","itemsTotal","onProgress","onLoad","onError","textureLoader","colorTexture","map","className","Chapter4_2","wrapS","wrapT","offset","center","Vector2","Chapter4_3","minFilter","magFilter","Chapter4_4","AlphaTexture","AoTexture","alphaMap","opacity","aoMap","aoMapIntensity","attributes","uv","array","Chapter4_5","ColorTexture","DisplaceTexture","RoughnessTexture","MetalnessTexture","NormalTexture","displacementMap","displacementScale","roughnessMap","roughness","metalnessMap","metalness","normalMap","basicMaterialPanel","hasMap","none","standardMaterialPanel","directionalLight","textureType","envMap","Chapter4_6","hdrTexture","envMapTexture","Chapter5_1","castShadow","planeGeometry","plane","receiveShadow","shadow","near","far","top","bottom","left","right","directionalLightPanel","shadowMap","enabled","Chapter5_2","spotLight","intensity","radius","mapSize","target","angle","distance","penumbra","decay","spotLightPanel","physicallyCorrectLights","Chapter5_3","smallBall","pointLight","pointLightPanel","Chapter6_1","widthSegments","heightSegments","sizeAttenuation","depthWrite","blending","dispose","Chapter6_2","createPoints","particlesGeometry","count","positions","colors","pointsMaterial","vertexColors","branch","spin","randomness","randomnessPower","insideColor","outsideColor","Chapter6_3","generateGalaxy","remove","branchesAngle","spinAngle","colorInside","colorOutside","mixedColor","lerp","r","g","b","randomX","randomY","randomZ","cos","sin","enableDamping","zoomSpeed","gui","onFinishChange","close","cubeArr","Chapter7_1","boxGeometry","j","cube","mouseClick","event","offsetX","offsetY","setFromCamera","result","intersectObjects","forEach","item","object","length","Chapter8_1","menu","label","key","path","component","dirLight","sphereGeometry","sphereMaterial","sphere","floor","world","CANNON","gravity","sphereShape","sphereWorldMaterial","sphereBody","shape","mass","addBody","floorShape","floorBody","addShape","quaternion","setFromAxisAngle","deltaTime","getDelta","copy","hitSound","Audio","cubeWorldMaterial","cubeGeometry","cubeMaterial","cubeShape","cubeBody","applyLocalForce","e","impactStrength","contact","getImpactVelocityAlongNormal","currentTime","volume","play","body","floorMaterial","defaultContactMaterial","friction","restitution","addContactMaterial","useSelectedMenu","useImmer","selectedKeys","openKeys","title","state","setState","pathname","useLocation","child","SubMenu","Menu","SideMenu","navigate","useNavigate","mode","Item","onClick","setTimeout","location","reload","PageHeader","marginLeft","previousTime","sectionMeshes","parameters","materialColor","objectsDistance","currentSection","isPortrait","pages","mouseMove","clientX","clientY","scrollAnimation","scrollY","newSection","round","ease","querySelector","cameraGroup","sizes","setZ","gradientTexture","gradientMap","mesh1","mesh2","mesh3","particlesCount","particlesMaterial","particels","setX","setY","directionLight","ambientLight","antialias","parallaxX","parallaxY","dat","Sider","Layout","Header","Content","App","collapsed","setCollapsed","includes","element","collapsible","onCollapse","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.a0e52fee.chunk.js","sourcesContent":["/*\n * @Title: three.js快速上手第一个项目\n * @Author: huangjitao\n * @Date: 2022-09-07 16:31:50\n * @Description: description of this file\n */\n\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>, renderer: THREE.WebGLRenderer, camera: THREE.Camera\n\nconst Chapter1_2 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene()\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BoxGeometry(100, 100, 100);\n    // 创建一个材质对象\n    const material = new THREE.MeshLambertMaterial({ color: 0x0000ff });\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material)\n    // 将网格模型对象添加到场景中\n    scene.add(mesh)\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(400, 200, 300);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n  }\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n    const k = width / height; //窗口宽高比\n    const s = 200; //三维场景显示范围控制系数，系数越大，显示的范围越大\n    // 创建相机\n    camera = new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);\n    camera.position.set(200, 300, 200); //设置相机位置\n    camera.lookAt(scene.position); //设置相机方向(指向的场景对象)\n\n    /** --- 渲染器设置 ---*/\n    renderer.setSize(width, height);//设置渲染区域尺寸\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    //执行渲染操作   指定场景、相机作为参数\n    renderer.render(scene, camera);\n  }\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree()\n  }, [])\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize()\n    }\n  }, [size?.width, size?.height])\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: '100%', height: '100%' }}\n      ref={ref}\n    />\n  );\n}\n\nexport default Chapter1_2\n","/*\n * @Title: 着色器材质\n * @Author: huangjitao\n * @Date: 2022-11-28 10:08:07\n * @Description: 结合Three.js和着色器语言，使用着色器材质（ShaderMaterial）创建平面\n */\n\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport VertexShader from './shader/vertex';\nimport FragmentShader from './shader/fragment'\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter11_1 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.PlaneGeometry(1, 1, 64, 64)\n    // 创建一个材质对象\n    const shaderMaterial = new THREE.ShaderMaterial({\n      vertexShader: VertexShader,\n      fragmentShader: FragmentShader,\n    })\n\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, shaderMaterial);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      90,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 2);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref} />\n  );\n};\n\nexport default Chapter11_1;\n","/*\n * @Title: 着色器材质\n * @Author: huangjitao\n * @Date: 2022-11-28 10:08:07\n * @Description: 结合Three.js和着色器语言，使用着色器材质（ShaderMaterial）创建平面\n */\n\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport VertexShader from './shader/vertex';\nimport FragmentShader from './shader/fragment'\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera\n\nconst Chapter11_2 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    // 创建纹理加载器对象\n    const textureLoader = new THREE.TextureLoader();\n    const texture = textureLoader.load(\"/textures/flag_paralympic.jpeg\");\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.PlaneGeometry(1, 1, 64, 64)\n    // 创建一个材质对象\n    const rawShaderMaterial = new THREE.RawShaderMaterial({\n      vertexShader: VertexShader,\n      fragmentShader: FragmentShader,\n      side: THREE.DoubleSide,\n      uniforms: {\n        uTime: {\n          value: 0,\n        },\n        uTexture: {\n          value: texture,\n        },\n      }\n    })\n\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, rawShaderMaterial);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    const axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      90,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 2);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    const controls = new OrbitControls(camera, renderer.domElement);\n\n    const clock = new THREE.Clock();\n    function render() {\n      const elapsedTime = clock.getElapsedTime();\n      rawShaderMaterial.uniforms.uTime.value = elapsedTime;\n      controls.update();\n      renderer.render(scene, camera);\n      // 渲染下一帧的时候就会调用render函数\n      requestAnimationFrame(render);\n    }\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref} />\n  );\n};\n\nexport default Chapter11_2;\n","/*\n * @Title: 着色器材质\n * @Author: huangjitao\n * @Date: 2022-11-28 10:08:07\n * @Description: 结合Three.js和着色器语言，使用着色器材质（ShaderMaterial）创建平面\n */\n\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport VertexShader from './shader/vertex';\nimport GUI from \"lil-gui\";\nimport FragmentShader_1 from './shader/fragment_1';\nimport FragmentShader_2 from './shader/fragment_2';\nimport FragmentShader_3 from \"./shader/fragment_3\";\nimport FragmentShader_4 from \"./shader/fragment_4\";\nimport FragmentShader_5 from \"./shader/fragment_5\";\nimport FragmentShader_6 from \"./shader/fragment_6\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera\n\nconst Chapter12_1 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    // 创建纹理加载器对象\n    const textureLoader = new THREE.TextureLoader();\n    const texture = textureLoader.load(\"/textures/flag_paralympic.jpeg\");\n\n    const params = {\n      uFrequency: 10,\n      uScale: 0.1,\n    };\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.PlaneGeometry(1, 1, 64, 64)\n    // 创建一个材质对象\n    const ShaderMaterial = new THREE.ShaderMaterial({\n      vertexShader: VertexShader,\n      fragmentShader: FragmentShader_1,\n      uniforms: {\n        uColor: {\n          value: new THREE.Color(\"purple\"),\n        },\n        // 波浪的频率\n        uFrequency: {\n          value: params.uFrequency,\n        },\n        // 波浪的幅度\n        uScale: {\n          value: params.uScale,\n        },\n        // 动画时间\n        uTime: {\n          value: 0,\n        },\n        uTexture: {\n          value: texture,\n        },\n      },\n      side: THREE.DoubleSide,\n      transparent: true,\n    })\n\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, ShaderMaterial);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    const axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      90,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 2);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建图形界面工具--- */\n    const panel = new GUI();\n    panel\n      .add(ShaderMaterial, \"fragmentShader\", {\n        '1': FragmentShader_1,\n        '2': FragmentShader_2,\n        '3': FragmentShader_3,\n        '4': FragmentShader_4,\n        '5': FragmentShader_5,\n        '6': FragmentShader_6,\n      })\n      .name('片元着色器')\n      .onChange((value: any) => {\n        ShaderMaterial.fragmentShader = value;\n        ShaderMaterial.needsUpdate = true;\n      })\n\n    /** ---创建轨道控制器--- */\n    const controls = new OrbitControls(camera, renderer.domElement);\n\n    const clock = new THREE.Clock();\n    function render() {\n      const elapsedTime = clock.getElapsedTime();\n      ShaderMaterial.uniforms.uTime.value = elapsedTime;\n      controls.update();\n      renderer.render(scene, camera);\n      // 渲染下一帧的时候就会调用render函数\n      requestAnimationFrame(render);\n    }\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref} />\n  );\n};\n\nexport default Chapter12_1;\n","/*\n * @Title: 着色器材质\n * @Author: huangjitao\n * @Date: 2022-11-28 10:08:07\n * @Description: 结合Three.js和着色器语言，使用着色器材质（ShaderMaterial）创建平面\n */\n\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport VertexShader from './shader/vertex';\nimport FragmentShader from './shader/fragment';\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport gsap from \"gsap\";\n\nlet scene: THREE.Scene,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera\n\nconst Chapter12_2 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    // 创建纹理加载器对象\n    // 创建纹理加载器对象\n    const rgbeLoader = new RGBELoader();\n    rgbeLoader.loadAsync(\"/textures/hdr/003.hdr\").then((texture) => {\n      texture.mapping = THREE.EquirectangularReflectionMapping;\n      scene.background = texture;\n      scene.environment = texture;\n    });\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.PlaneGeometry(1, 1, 64, 64)\n    // 创建一个材质对象\n    const shaderMaterial = new THREE.ShaderMaterial({\n      vertexShader: VertexShader,\n      fragmentShader: FragmentShader,\n      uniforms: {},\n      side: THREE.DoubleSide,\n    })\n\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, shaderMaterial);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      90,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 2);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer({ alpha: true});\n    renderer.outputEncoding = THREE.sRGBEncoding;\n    renderer.toneMapping = THREE.ACESFilmicToneMapping;\n    renderer.toneMappingExposure = 0.2;\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    const gltfLoader = new GLTFLoader();\n    let LightBox: any = null;\n    gltfLoader.load(\"/model/flyLight.glb\", (gltf) => {\n      LightBox = gltf.scene.children[1];\n      LightBox.material = shaderMaterial;\n\n      for (let i = 0; i < 150; i++) {\n        let flyLight = gltf.scene.clone(true);\n        let x = (Math.random() - 0.5) * 300;\n        let z = (Math.random() - 0.5) * 300;\n        let y = Math.random() * 60 + 25;\n        flyLight.position.set(x, y, z);\n        gsap.to(flyLight.rotation, {\n          y: 2 * Math.PI,\n          duration: 10 + Math.random() * 30,\n          repeat: -1,\n        });\n        gsap.to(flyLight.position, {\n          x: \"+=\" + Math.random() * 5,\n          y: \"+=\" + Math.random() * 20,\n          yoyo: true,\n          duration: 5 + Math.random() * 10,\n          repeat: -1,\n        });\n        scene.add(flyLight);\n      }\n    });\n\n    /** ---创建轨道控制器--- */\n    const controls = new OrbitControls(camera, renderer.domElement);\n\n    function render() {\n      controls.update();\n      renderer.render(scene, camera);\n      // 渲染下一帧的时候就会调用render函数\n      requestAnimationFrame(render);\n    }\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref} />\n  );\n};\n\nexport default Chapter12_2;\n","/*\n * @Title: three.js的基本操作\n * @Author: huangjitao\n * @Date: 2022-09-14 17:27:20\n * @Description: 轨道控制器、移动、翻转、缩放等\n */\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>, renderer: THREE.WebGLRenderer, camera: THREE.PerspectiveCamera,\n  controls: OrbitControls, axesHelper\n\nconst Chapter2_1 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene()\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BoxGeometry(1, 1, 1);\n    // 创建一个材质对象\n    const material = new THREE.MeshLambertMaterial({ color: 0x0000ff });\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material)\n    // 将网格模型对象添加到场景中\n    scene.add(mesh)\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 物体移动 --- */\n    // 修改物体的位置\n    // mesh.position.set(2, 2, 2);\n    mesh.position.x = 3;\n    // 缩放\n    // mesh.scale.set(1, 2, 3);\n    mesh.scale.y = 1.5;\n    // 旋转\n    mesh.rotation.set(Math.PI / 4, 0, 0, \"XZY\");\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  }\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  }\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree()\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener('dblclick', fullScreen)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize()\n    }\n  }, [size?.width, size?.height])\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: '100%', height: '100%' }}\n      ref={ref}\n    />\n  );\n}\n\nexport default Chapter2_1\n","/*\n * @Title: three.js的动画\n * @Author: huangjitao\n * @Date: 2022-09-14 17:27:20\n * @Description: clock动画、gsap动画、图形用户界面。\n */\nimport React from \"react\";\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper,\n  clock: THREE.Clock,\n  mesh: THREE.Mesh;\n\nconst Chapter2_2 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BoxGeometry(1, 1, 1);\n    // 创建一个材质对象\n    const material = new THREE.MeshLambertMaterial({ color: 0x0000ff });\n    // 创建一个网格模型对象\n    mesh = new THREE.Mesh(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    /** ---创建时钟--- */\n    clock = new THREE.Clock();\n    clock.start();\n\n    /** ---渲染--- */\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    const time = clock.getElapsedTime();\n    const offSet = time % 5;\n    if (time > 25) {\n      // 循环5次后关闭时钟\n      mesh.position.x = 0;\n      mesh.position.y = 0;\n      clock.stop();\n    } else {\n      mesh.position.x = offSet;\n      mesh.position.y = offSet;\n    }\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    // 添加双击时间\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref} />\n  );\n};\n\nexport default Chapter2_2;\n","import React from \"react\";\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport GUI from \"lil-gui\";\nimport { MeshLambertMaterial } from \"three\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper,\n  mesh: THREE.Mesh;\n\nconst Chapter2_3 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BoxGeometry(1, 1, 1);\n    // 创建一个材质对象\n    const material = new THREE.MeshLambertMaterial({ color: 0x0000ff });\n    // 创建一个网格模型对象\n    mesh = new THREE.Mesh(geometry, material);\n    console.log(\"mesh:\", mesh);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    /** ---创建图形界面工具--- */\n    const panel = new GUI();\n    panel\n      .add(mesh, \"visible\")\n      .name(\"显示物体\")\n      .onChange(() => console.log(`当前物体是否显示：${mesh.visible}`));\n    panel\n      .addColor(mesh.material, \"color\")\n      .name(\"改变物体颜色\")\n      .onChange((v: string) => {\n        const material = mesh.material as MeshLambertMaterial\n        material.color.set(v)\n      });\n    const positionPanel = panel.addFolder(\"移动物体位置\");\n    positionPanel\n      .add(mesh.position, \"x\")\n      .min(0)\n      .max(5)\n      .step(0.01)\n      .name(\"移动x轴\");\n    positionPanel\n      .add(mesh.position, \"y\")\n      .min(0)\n      .max(5)\n      .step(0.01)\n      .name(\"移动y轴\");\n    positionPanel\n      .add(mesh.position, \"z\")\n      .min(0)\n      .max(5)\n      .step(0.01)\n      .name(\"移动z轴\");\n\n    /** ---渲染--- */\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    // 添加双击时间\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref} />\n  );\n};\n\nexport default Chapter2_3;\n","/*\n * @Title: three.js自定义几何体\n * @Author: huangjitao\n * @Date: 2022-09-14 17:27:20\n * @Description: 深入研究three.js中的geometry，自定义一个矩形\n */\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter3_1 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BufferGeometry();\n    // // 因为在两个三角面片里，一共有六个顶点，其中两个顶点是一模一样的。\n    // const vertices = new Float32Array([\n    //   -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, 1.0, 1.0,\n    //   1.0, 1.0, 1.0, -1.0, 1.0, 1.0, -1.0, -1.0, 1.0,\n    // ]);\n    // // 顶点的法线向量，设置后可以突出光照\n    // const normals = new Float32Array([\n    //   0,0,1,0,0,1,0,0,1,\n    //   0,0,1,0,0,1,0,0,1\n    // ])\n    // // 一个顶点由三个坐标表示，因此创建时，三个坐标值为一组\n    // geometry.setAttribute(\"position\", new THREE.BufferAttribute(vertices, 3));\n    // geometry.setAttribute(\"normal\", new THREE.BufferAttribute(normals, 3))\n\n    // 使用index（索引）复用顶点\n    const vertices = new Float32Array([\n      -1.0, -1.0, 1.0,   1.0, -1.0, 1.0,\n      1.0, 1.0, 1.0,   -1.0, 1.0, 1.0, \n    ]);\n    // 顶点的法线向量，设置后可以突出光照\n    const normals = new Float32Array([\n      0, 0, 1, 0, 0, 1,\n      0, 0, 1, 0, 0, 1\n    ])\n    const indexes = new Uint16Array([\n      // 0对应第1个顶点位置数据、第1个顶点法向量数据\n      // 1对应第2个顶点位置数据、第2个顶点法向量数据\n      // 索引值3个为一组，表示一个三角形的3个顶点\n      0, 1, 2,\n      0, 2, 3,\n    ])\n    // 一个顶点由三个坐标表示，因此创建时，三个坐标值为一组\n    geometry.setAttribute(\"position\", new THREE.BufferAttribute(vertices, 3));\n    geometry.setAttribute(\"normal\", new THREE.BufferAttribute(normals, 3))\n    geometry.index = new THREE.BufferAttribute(indexes, 1)\n\n    // 创建一个材质对象\n    const material = new THREE.MeshLambertMaterial({ color: 0x0000ff });\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref} />\n  );\n};\n\nexport default Chapter3_1;\n","import { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls\n\nconst Chapter3_2 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BufferGeometry();\n\n    const triangleVertices = [];\n    for (let index = 0; index < 300; index += 1) {\n      triangleVertices.push(Math.random() - 0.5);\n    }\n\n    const vertices = new Float32Array(triangleVertices);\n\n    geometry.setAttribute(\"position\", new THREE.BufferAttribute(vertices, 3));\n\n    // 创建一个材质对象\n    const material = new THREE.MeshLambertMaterial({ color: 0x607d8b, wireframe: true });\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref} />\n  );\n};\n\nexport default Chapter3_2;\n","/*\n * @Title: three.js加载纹理\n * @Author: huangjitao\n * @Date: 2022-09-14 17:27:20\n * @Description: 深入研究three.js中的geometry，自定义一个矩形\n */\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter4_1 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n  const [loadTip, setLoadTip] = useState<string>(\"\");\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BoxGeometry();\n\n    const loadingManager = new THREE.LoadingManager();\n    loadingManager.onStart = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `开始加载资源: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onProgress = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `加载资源中: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onLoad = () => {\n      setLoadTip(\"加载资源完成\");\n    };\n    loadingManager.onError = (url) => {\n      setLoadTip(`加载资源出错 ${url}`);\n    };\n\n    const textureLoader = new THREE.TextureLoader(loadingManager);\n    const colorTexture = textureLoader.load(\"/textures/door/color.jpg\");\n    const alphaTexture = textureLoader.load(\"/textures/door/alpha.jpg\");\n    const heightTexture = textureLoader.load(\"/textures/door/height.jpg\");\n    const normalTexture = textureLoader.load(\"/textures/door/normal.jpg\");\n    const alphaTexture1 = textureLoader.load(\"/textures/door/alpha.jpg\");\n    const heightTexture1 = textureLoader.load(\"/textures/door/height.jpg\");\n    const normalTexture1 = textureLoader.load(\"/textures/door/normal.jpg\");\n    const alphaTexture2 = textureLoader.load(\"/textures/door/alpha.jpg\");\n    const heightTexture2 = textureLoader.load(\"/textures/door/height.jpg\");\n    const normalTexture2 = textureLoader.load(\"/textures/door/normal.jpg\");\n    const alphaTexture3 = textureLoader.load(\"/textures/door/alpha.jpg\");\n    const heightTexture3 = textureLoader.load(\"/textures/door/height.jpg\");\n    const normalTexture3 = textureLoader.load(\"/textures/door/normal.jpg\");\n\n    // 创建一个材质对象\n    const material = new THREE.MeshBasicMaterial({ map: colorTexture });\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref}>\n      <div className=\"load-tip\" id=\"tip\">{loadTip}</div>\n    </div>\n  );\n};\n\nexport default Chapter4_1;\n","/*\n * @Title: 纹理变换\n * @Author: huangjitao\n * @Date: 2022-09-26 10:04:43\n * @Description: description of this file\n */\n\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { Vector2 } from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter4_2 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n  const [loadTip, setLoadTip] = useState<string>(\"\");\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BoxGeometry();\n\n    const loadingManager = new THREE.LoadingManager();\n    loadingManager.onStart = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `开始加载资源: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onProgress = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `加载资源中: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onLoad = () => {\n      setLoadTip(\"加载资源完成\");\n    };\n    loadingManager.onError = (url) => {\n      setLoadTip(`加载资源出错 ${url}`);\n    };\n\n    const textureLoader = new THREE.TextureLoader(loadingManager);\n    const colorTexture = textureLoader.load(\"/textures/door/color.jpg\");\n\n    // 纹理变换\n    colorTexture.repeat.x = 2;\n    colorTexture.repeat.x = 3;\n    // 以上两个设置并没有repeat，而是边缘的像素被拉伸了，需要再设置属性wrapS和wrapT\n    colorTexture.wrapS = THREE.RepeatWrapping;\n    colorTexture.wrapT = THREE.RepeatWrapping;\n    // colorTexture.wrapS = THREE.MirroredRepeatWrapping;\n    // colorTexture.wrapT = THREE.MirroredRepeatWrapping;\n    // 设置偏移属性\n    colorTexture.offset.x = 0.5\n    colorTexture.offset.y = 0\n    // 设置旋转属性\n    colorTexture.rotation = Math.PI / 4\n    colorTexture.center = new Vector2(0.5, 0.5)\n\n    // 创建一个材质对象\n    const material = new THREE.MeshBasicMaterial({ map: colorTexture });\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref}>\n      <div className=\"load-tip\" id=\"tip\">\n        {loadTip}\n      </div>\n    </div>\n  );\n};\n\nexport default Chapter4_2;\n\n","/*\n * @Title: 纹理显示算法\n * @Author: huangjitao\n * @Date: 2022-09-26 15:39:32\n * @Description: description of this file\n */\n\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { Vector2 } from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter4_3 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n  const [loadTip, setLoadTip] = useState<string>(\"\");\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BoxGeometry();\n\n    const loadingManager = new THREE.LoadingManager();\n    loadingManager.onStart = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `开始加载资源: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onProgress = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `加载资源中: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onLoad = () => {\n      setLoadTip(\"加载资源完成\");\n    };\n    loadingManager.onError = (url) => {\n      setLoadTip(`加载资源出错 ${url}`);\n    };\n\n    const textureLoader = new THREE.TextureLoader(loadingManager);\n    const texture = textureLoader.load(\"/textures/minecraft.png\");\n\n    texture.minFilter = THREE.NearestFilter;\n    texture.magFilter = THREE.NearestFilter;\n\n    // 创建一个材质对象\n    const material = new THREE.MeshBasicMaterial({ map: texture });\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref}>\n      <div className=\"load-tip\" id=\"tip\">\n        {loadTip}\n      </div>\n    </div>\n  );\n};\n\nexport default Chapter4_3;\n","/*\n * @Title: 基础材质的参数\n * @Author: huangjitao\n * @Date: 2022-09-29 10:38:09\n * @Description: 透明度纹理、环境遮挡贴图\n */\n\nimport { useSize } from \"ahooks\";\nimport GUI from \"lil-gui\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter4_4 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n  const [loadTip, setLoadTip] = useState<string>(\"\");\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BoxGeometry();\n\n    const loadingManager = new THREE.LoadingManager();\n    loadingManager.onStart = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `开始加载资源: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onProgress = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `加载资源中: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onLoad = () => {\n      setLoadTip(\"加载资源完成\");\n    };\n    loadingManager.onError = (url) => {\n      setLoadTip(`加载资源出错 ${url}`);\n    };\n\n    const textureLoader = new THREE.TextureLoader(loadingManager);\n    const colorTexture = textureLoader.load(\"/textures/door/color.jpg\");\n    const AlphaTexture = textureLoader.load(\"/textures/door/alpha.jpg\");\n    const AoTexture = textureLoader.load(\"/textures/door/ambientOcclusion.jpg\");\n\n    const material = new THREE.MeshBasicMaterial({\n      color: \"#ffff00\",\n      map: colorTexture,\n      alphaMap: AlphaTexture,\n      transparent: true,\n      opacity: 0.5,\n      aoMap: AoTexture,\n      aoMapIntensity: 0.5,\n      wireframe: false,\n      side: THREE.DoubleSide,\n    });\n    // aoMap需要第二组UV。\n    geometry.setAttribute(\n      \"uv2\",\n      new THREE.BufferAttribute(geometry.attributes.uv.array, 2)\n    );\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** ---创建图形界面工具--- */\n    const panel = new GUI();\n    panel\n      .add(material, \"alphaMap\", { \"fibers\": AlphaTexture, \"none\": null })\n      .name(\"透明贴图\")\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      })\n    panel\n      .add(material, \"transparent\")\n      .name(\"是否透明\")\n      .onChange(() => console.log(`当前物体是否显示：${mesh.visible}`));\n    panel\n      .add(material, \"opacity\")\n      .min(0)\n      .max(1)\n      .step(0.01)\n      .name(\"设置透明度\");\n    panel\n      .add(material, \"aoMap\", { \"fibers\": AoTexture, \"none\": null })\n      .name(\"环境遮挡贴图\")\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      })\n    panel\n      .add(material, \"aoMapIntensity\")\n      .min(0)\n      .max(1)\n      .step(0.01)\n      .name(\"环境遮挡强度\");\n    panel\n      .add(material, \"side\", {\n        'THREE.FrontSide': THREE.FrontSide,\n        'THREE.BackSide': THREE.BackSide,\n        'THREE.DoubleSide': THREE.DoubleSide\n      })\n      .name('渲染面')\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      })\n    panel\n      .add(material, \"wireframe\")\n      .name(\"是否线框\")\n\n    /** --- 设置光源 --- */\n    // 点光源\n    const point = new THREE.PointLight(0xffffff);\n    point.position.set(4, 2, 3);\n    scene.add(point); //点光源添加到场景中\n    //环境光\n    const ambient = new THREE.AmbientLight(0x444444);\n    scene.add(ambient);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref}>\n      <div className=\"load-tip\" id=\"tip\">\n        {loadTip}\n      </div>\n    </div>\n  );\n};\n\nexport default Chapter4_4;\n","/*\n * @Title: 标准材质的参数\n * @Author: huangjitao\n * @Date: 2022-09-29 10:38:09\n * @Description: 透明度纹理、环境遮挡贴图\n */\n\nimport { useSize } from \"ahooks\";\nimport GUI from \"lil-gui\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene | THREE.Object3D<THREE.Event>,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter4_5 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n  const [loadTip, setLoadTip] = useState<string>(\"\");\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.BoxGeometry(1, 1, 1, 100, 100, 100);\n\n    const loadingManager = new THREE.LoadingManager();\n    loadingManager.onStart = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `开始加载资源: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onProgress = (url, itemsLoaded, itemsTotal) => {\n      setLoadTip(\n        `加载资源中: ${url}.\\nLoaded ${itemsLoaded} of ${itemsTotal} files.`\n      );\n    };\n    loadingManager.onLoad = () => {\n      setLoadTip(\"加载资源完成\");\n    };\n    loadingManager.onError = (url) => {\n      setLoadTip(`加载资源出错 ${url}`);\n    };\n\n    const textureLoader = new THREE.TextureLoader(loadingManager);\n    const ColorTexture = textureLoader.load(\"/textures/door/color.jpg\");\n    const AlphaTexture = textureLoader.load(\"/textures/door/alpha.jpg\"); // 透明贴图\n    const AoTexture = textureLoader.load(\"/textures/door/ambientOcclusion.jpg\"); // 环境遮挡贴图\n    const DisplaceTexture = textureLoader.load(\"/textures/door/height.jpg\"); // 置换贴图\n    const RoughnessTexture = textureLoader.load(\"/textures/door/roughness.jpg\"); // 粗糙度贴图\n    const MetalnessTexture = textureLoader.load(\"/textures/door/metalness.jpg\"); // 金属度贴图\n    const NormalTexture = textureLoader.load(\"/textures/door/normal.jpg\");// 法线贴图\n\n    const material = new THREE.MeshStandardMaterial({\n      color: \"#ffff00\",\n      map: ColorTexture,\n      alphaMap: null,\n      transparent: true,\n      opacity: 1,\n      aoMap: null,\n      aoMapIntensity: 1,\n      displacementMap: DisplaceTexture,\n      displacementScale: 0.1,\n      roughnessMap: null,\n      roughness: 1,\n      metalnessMap: null,\n      metalness: 1,\n      normalMap: null,\n      side: THREE.DoubleSide,\n    });\n    // aoMap需要第二组UV。\n    geometry.setAttribute(\n      \"uv2\",\n      new THREE.BufferAttribute(geometry.attributes.uv.array, 2)\n    );\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** ---创建图形界面工具--- */\n    const panel = new GUI();\n    const basicMaterialPanel = panel.addFolder(\"BasicMaterial\");\n    basicMaterialPanel\n      .add(material, \"alphaMap\", { hasMap: AlphaTexture, none: null })\n      .name(\"透明贴图\")\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      });\n    basicMaterialPanel\n      .add(material, \"transparent\")\n      .name(\"是否透明\")\n      .onChange(() => console.log(`当前物体是否显示：${mesh.visible}`));\n    basicMaterialPanel\n      .add(material, \"opacity\")\n      .min(0)\n      .max(1)\n      .step(0.01)\n      .name(\"设置透明度\");\n    basicMaterialPanel\n      .add(material, \"aoMap\", { hasMap: AoTexture, none: null })\n      .name(\"环境遮挡贴图\")\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      });\n    basicMaterialPanel\n      .add(material, \"aoMapIntensity\")\n      .min(0)\n      .max(1)\n      .step(0.01)\n      .name(\"环境遮挡强度\");\n    basicMaterialPanel\n      .add(material, \"side\", {\n        \"THREE.FrontSide\": THREE.FrontSide,\n        \"THREE.BackSide\": THREE.BackSide,\n        \"THREE.DoubleSide\": THREE.DoubleSide,\n      })\n      .name(\"渲染面\")\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      });\n\n    const standardMaterialPanel = panel.addFolder(\"StandardMaterial\");\n    standardMaterialPanel\n      .add(material, \"displacementMap\", { hasMap: DisplaceTexture, none: null })\n      .name(\"置换贴图\")\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      });\n    standardMaterialPanel\n      .add(material, \"displacementScale\")\n      .min(0)\n      .max(0.1)\n      .step(0.0001)\n      .name(\"置换贴图顶点细分度\")\n\n    standardMaterialPanel\n      .add(material, \"roughnessMap\", { hasMap: RoughnessTexture, none: null })\n      .name(\"粗糙度贴图\")\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      });\n    standardMaterialPanel\n      .add(material, \"roughness\")\n      .min(0)\n      .max(1)\n      .step(0.01)\n      .name(\"粗糙程度\")\n\n    standardMaterialPanel\n      .add(material, \"metalnessMap\", { hasMap: MetalnessTexture, none: null })\n      .name(\"金属度贴图\")\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      });\n    standardMaterialPanel\n      .add(material, \"metalness\")\n      .min(0)\n      .max(1)\n      .step(0.01)\n      .name(\"金属相似度\")\n    standardMaterialPanel\n      .add(material, \"normalMap\", { hasMap: NormalTexture, none: null })\n      .name(\"法线贴图\")\n      .onChange((value: any) => {\n        material.needsUpdate = true;\n      });\n\n    /** --- 设置光源 --- */\n    // // 点光源\n    // const point = new THREE.PointLight(0xffffff);\n    // point.position.set(0, 5, 10);\n    // scene.add(point); //点光源添加到场景中\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n    // 直线光\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);\n    directionalLight.position.set(10, 10, 10);\n    scene.add(directionalLight);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 5);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref}>\n      <div className=\"load-tip\" id=\"tip\">\n        {loadTip}\n      </div>\n    </div>\n  );\n};\n\nexport default Chapter4_5;\n","import React from \"react\";\n\nimport { useSize } from \"ahooks\";\nimport GUI from \"lil-gui\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\n\nlet scene: THREE.Scene,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst textureType = {\n  envMap: 3\n}\n\nconst Chapter4_6 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    // 设置cube纹理加载器,设置环境贴图\n    const cubeTextureLoader = new THREE.CubeTextureLoader();\n    const envMapTexture = cubeTextureLoader.load([\n      \"/textures/environmentMaps/1/px.jpg\",\n      \"/textures/environmentMaps/1/nx.jpg\",\n      \"/textures/environmentMaps/1/py.jpg\",\n      \"/textures/environmentMaps/1/ny.jpg\",\n      \"/textures/environmentMaps/1/pz.jpg\",\n      \"/textures/environmentMaps/1/nz.jpg\",\n    ]);\n\n    // 加载hdr环境图\n    let hdrTexture: any\n    const rgbeLoader = new RGBELoader();\n    rgbeLoader.loadAsync(\"/textures/hdr/002.hdr\").then((texture) => {\n      texture.mapping = THREE.EquirectangularReflectionMapping;\n      hdrTexture = texture\n    });\n\n    /** --- 创建一个网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.SphereGeometry(1,20, 20);\n\n    const material = new THREE.MeshStandardMaterial({\n      metalness: 0.7,\n      roughness: 0.1,\n      // envMap: envMapTexture,\n    });\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    /** ---创建图形界面工具--- */\n    const panel = new GUI();\n    panel\n      .add(textureType, \"envMap\", { \"环境贴图\": 1, \"hdr\": 2, \"无\": 3 })\n      .name(\"贴图类型\")\n      .onChange((value: any) => {\n        if (value === 1) {\n          // 给场景添加背景\n          scene.background = envMapTexture;\n          // 给场景所有的物体添加默认的环境贴图\n          scene.environment = envMapTexture;\n        } else if (value === 2) {\n          scene.background = hdrTexture;\n          scene.environment = hdrTexture;\n        } else {\n          scene.background = null;\n          scene.environment = null;\n        }\n      });\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n    // 直线光\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);\n    directionalLight.position.set(10, 10, 10);\n    scene.add(directionalLight);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 10);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div id=\"container\" style={{ width: \"100%\", height: \"100%\" }} ref={ref}>\n    </div>\n  );\n};\n\nexport default Chapter4_6;\n","import React from \"react\";\nimport { useSize } from \"ahooks\";\nimport GUI from \"lil-gui\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter5_1 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.SphereGeometry(1, 20, 20);\n    const material = new THREE.MeshStandardMaterial();\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 设置物体投射阴影\n    mesh.castShadow = true;\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    // 创建平面\n    const planeGeometry = new THREE.PlaneGeometry(10, 10);\n    const plane = new THREE.Mesh(planeGeometry, material);\n    plane.position.set(0, -1, 0);\n    plane.rotation.x = -Math.PI / 2;\n    // 接收其它物体的阴影\n    plane.receiveShadow = true;\n    scene.add(plane);\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n    // 直线光\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);\n    directionalLight.position.set(5, 5, 5);\n    directionalLight.castShadow = true;\n\n    directionalLight.shadow.camera.near = 0.5;\n    directionalLight.shadow.camera.far = 500;\n    directionalLight.shadow.camera.top = 5;\n    directionalLight.shadow.camera.bottom = -5;\n    directionalLight.shadow.camera.left = -5;\n    directionalLight.shadow.camera.right = 5;\n\n    scene.add(directionalLight);\n\n    const panel = new GUI();\n    const directionalLightPanel = panel.addFolder(\"平行光\");\n    directionalLightPanel\n      .add(directionalLight.shadow.camera, \"near\")\n      .min(0)\n      .max(10)\n      .step(0.1)\n      .onChange(() => {\n        directionalLight.shadow.camera.updateProjectionMatrix();\n      });\n    directionalLightPanel\n      .add(directionalLight.shadow.camera, \"far\")\n      .min(0)\n      .max(1000)\n      .step(10)\n      .onChange(() => {\n        directionalLight.shadow.camera.updateProjectionMatrix();\n      });\n    directionalLightPanel\n      .add(directionalLight.shadow.camera, \"top\")\n      .min(0)\n      .max(10)\n      .step(1)\n      .onChange(() => {\n        directionalLight.shadow.camera.updateProjectionMatrix();\n      });\n    directionalLightPanel\n      .add(directionalLight.shadow.camera, \"bottom\")\n      .min(-10)\n      .max(0)\n      .step(1)\n      .onChange(() => {\n        directionalLight.shadow.camera.updateProjectionMatrix();\n      });\n    directionalLightPanel\n      .add(directionalLight.shadow.camera, \"left\")\n      .min(-10)\n      .max(0)\n      .step(1)\n      .onChange(() => {\n        directionalLight.shadow.camera.updateProjectionMatrix();\n      });\n    directionalLightPanel\n      .add(directionalLight.shadow.camera, \"right\")\n      .min(0)\n      .max(10)\n      .step(1)\n      .onChange(() => {\n        directionalLight.shadow.camera.updateProjectionMatrix();\n      });\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 10);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.shadowMap.enabled = true;\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"100%\", height: \"100%\" }}\n      ref={ref}\n    ></div>\n  );\n};\n\nexport default Chapter5_1;\n","import React from \"react\";\nimport { useSize } from \"ahooks\";\nimport GUI from \"lil-gui\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter5_2 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.SphereGeometry(1, 20, 20);\n    const material = new THREE.MeshStandardMaterial();\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 设置物体投射阴影\n    mesh.castShadow = true;\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    // 创建平面\n    const planeGeometry = new THREE.PlaneGeometry(50, 50);\n    const plane = new THREE.Mesh(planeGeometry, material);\n    plane.position.set(0, -1, 0);\n    plane.rotation.x = -Math.PI / 2;\n    // 接收其它物体的阴影\n    plane.receiveShadow = true;\n    scene.add(plane);\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n    // 直线光\n    const spotLight = new THREE.SpotLight(0xffffff, 1);\n    spotLight.position.set(5, 5, 5);\n    spotLight.castShadow = true;\n    spotLight.intensity = 2;\n\n    // 设置阴影贴图模糊度\n    spotLight.shadow.radius = 20;\n    // 设置阴影贴图的分辨率\n    spotLight.shadow.mapSize.set(512, 512);\n    spotLight.target = mesh;\n    spotLight.angle = Math.PI / 6;\n    spotLight.distance = 0;\n    spotLight.penumbra = 0;\n    spotLight.decay = 0;\n\n    scene.add(spotLight);\n\n    const panel = new GUI();\n    const spotLightPanel = panel.addFolder(\"平行光\");\n    spotLightPanel.add(mesh.position, \"x\").min(-5).max(5).step(0.1);\n    spotLightPanel\n      .add(spotLight, \"angle\")\n      .min(0)\n      .max(Math.PI / 2)\n      .step(0.01);\n    spotLightPanel.add(spotLight, \"distance\").min(0).max(10).step(0.01);\n    spotLightPanel.add(spotLight, \"penumbra\").min(0).max(1).step(0.01);\n    spotLightPanel.add(spotLight, \"decay\").min(0).max(5).step(0.01);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 10);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    renderer.shadowMap.enabled = true;\n    renderer.physicallyCorrectLights = true;\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"100%\", height: \"100%\" }}\n      ref={ref}\n    ></div>\n  );\n};\n\nexport default Chapter5_2;\n","/*\n * @Title: 点光源\n * @Author: huangjitao\n * @Date: 2022-10-12 11:17:18\n * @Description: description of this file\n */\nimport React from \"react\";\nimport { useSize } from \"ahooks\";\nimport GUI from \"lil-gui\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter5_3 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    /** --- 创建网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.SphereGeometry(1, 20, 20);\n    const material = new THREE.MeshStandardMaterial();\n    // 创建一个网格模型对象\n    const mesh = new THREE.Mesh(geometry, material);\n    // 设置物体投射阴影\n    mesh.castShadow = true;\n    // 将网格模型对象添加到场景中\n    scene.add(mesh);\n\n    // 创建平面\n    const planeGeometry = new THREE.PlaneGeometry(50, 50);\n    const plane = new THREE.Mesh(planeGeometry, material);\n    plane.position.set(0, -1, 0);\n    plane.rotation.x = -Math.PI / 2;\n    // 接收其它物体的阴影\n    plane.receiveShadow = true;\n    scene.add(plane);\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n\n    const smallBall = new THREE.Mesh(\n      new THREE.SphereGeometry(0.1, 20, 20),\n      new THREE.MeshBasicMaterial({ color: 0xff0000 })\n    );\n    smallBall.position.set(2, 2, 2);\n    //直线光源\n    const pointLight = new THREE.PointLight(0xff0000, 1);\n    // pointLight.position.set(2, 2, 2);\n    pointLight.castShadow = true;\n\n    // 设置阴影贴图模糊度\n    pointLight.shadow.radius = 20;\n    // 设置阴影贴图的分辨率\n    pointLight.shadow.mapSize.set(512, 512);\n    pointLight.decay = 0;\n\n    // 设置透视相机的属性\n    smallBall.add(pointLight);\n    scene.add(smallBall);\n\n    const panel = new GUI();\n    const pointLightPanel = panel.addFolder(\"点光源\");\n    pointLightPanel.add(smallBall.position, \"x\").min(-5).max(5).step(0.1);\n    pointLightPanel.add(smallBall.position, \"y\").min(-5).max(5).step(0.1);\n    pointLightPanel.add(smallBall.position, \"z\").min(-5).max(5).step(0.1);\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 10);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    // 开启场景中的阴影贴图\n    renderer.shadowMap.enabled = true;\n    renderer.physicallyCorrectLights = true;\n    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"100%\", height: \"100%\" }}\n      ref={ref}\n    ></div>\n  );\n};\n\nexport default Chapter5_3;\n","/*\n * @Title: 点材质\n * @Author: huangjitao\n * @Date: 2022-10-18 16:36:34\n * @Description: 点材质及其属性\n */\n\nimport React from \"react\";\nimport { useSize } from \"ahooks\";\nimport GUI from \"lil-gui\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  axesHelper;\n\nconst Chapter6_1 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    const params = {\n      widthSegments: 30,\n      heightSegments: 30\n    }\n    /** --- 创建网格模型 --- */\n    // 创建一个几何体\n    const geometry = new THREE.SphereGeometry(3, params.widthSegments, params.heightSegments);\n    const material = new THREE.PointsMaterial();\n    material.size = 0.1;\n    material.color.set(0xfff000);\n    material.sizeAttenuation = true;\n    // 点材质设置纹理\n    const textureLoader = new THREE.TextureLoader();\n    const texture = textureLoader.load(\"/textures/particles/2.png\");\n    // 设置点材质纹理\n    material.map = texture;\n    material.alphaMap = texture;\n    material.transparent = true;\n    material.depthWrite = false;\n    material.blending = THREE.AdditiveBlending;\n    // 创建一个网格模型对象\n    const points = new THREE.Points(geometry, material);\n    // 将网格模型对象添加到场景中\n    scene.add(points);\n\n    const panel = new GUI();\n    console.log('points', points)\n    panel\n      .add(params, 'widthSegments')\n      .min(3)\n      .max(100)\n      .step(1)\n      .name('球的水平分段数')\n      .onChange((value: number) => {\n        points.geometry.dispose()\n        points.geometry = new THREE.SphereGeometry(3, params.widthSegments, params.heightSegments)\n      })\n    panel\n      .add(params, 'heightSegments')\n      .min(2)\n      .max(100)\n      .step(1)\n      .name('球的垂直分段数')\n      .onChange((value: number) => {\n        points.geometry.dispose()\n        points.geometry = new THREE.SphereGeometry(3, params.widthSegments, params.heightSegments)\n      })\n    panel.add(material, \"size\")\n      .min(0)\n      .max(1)\n      .step(0.01)\n      .name('点的大小')\n    panel.add(material, \"sizeAttenuation\")\n      .name('是否因相机深度而衰减')\n      .onChange((visible: boolean) => {\n        material.needsUpdate = true\n      })\n    panel.add(material, \"transparent\")\n      .name('材质是否透明')\n      .onChange((visible: boolean) => {\n        material.needsUpdate = true\n      })\n    panel.add(material, \"depthWrite\")\n      .name('渲染此材质是否对深度缓冲区有任何影响')\n      .onChange((visible: boolean) => {\n        material.needsUpdate = true\n      })\n    panel.add(material, \"blending\", {\n      \"THREE.NoBlending\": THREE.NoBlending,\n      \"THREE.NormalBlending\": THREE.NormalBlending,\n      \"THREE.AdditiveBlending\": THREE.AdditiveBlending,\n      \"THREE.SubtractiveBlending\": THREE.SubtractiveBlending,\n      \"THREE.MultiplyBlending\": THREE.MultiplyBlending,\n      \"THREE.CustomBlending\": THREE.CustomBlending\n    })\n      .name('混合模式')\n      .onChange((visible: boolean) => {\n        material.needsUpdate = true\n      })\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n\n    //直线光源\n    const pointLight = new THREE.PointLight(0xff0000, 1);\n    pointLight.castShadow = true;\n    // 设置阴影贴图模糊度\n    pointLight.shadow.radius = 20;\n    // 设置阴影贴图的分辨率\n    pointLight.shadow.mapSize.set(512, 512);\n    pointLight.decay = 0;\n\n    /** ---添加坐标辅助--- */\n    axesHelper = new THREE.AxesHelper(5);\n    scene.add(axesHelper);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 10);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    // 开启场景中的阴影贴图\n    renderer.shadowMap.enabled = true;\n    renderer.physicallyCorrectLights = true;\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"100%\", height: \"100%\" }}\n      ref={ref}\n    ></div>\n  );\n};\n\nexport default Chapter6_1;\n","/*\n * @Title: 自定义点材质\n * @Author: huangjitao\n * @Date: 2022-10-19 11:21:41\n * @Description: 自定义一个漫天飞舞的雪花\n */\n\nimport React from \"react\";\nimport { useSize } from \"ahooks\";\nimport GUI from \"lil-gui\";\nimport { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  clock: THREE.Clock,\n  points_1: THREE.Points<THREE.BufferGeometry, THREE.PointsMaterial>,\n  points_2: THREE.Points<THREE.BufferGeometry, THREE.PointsMaterial>,\n  points_3: THREE.Points<THREE.BufferGeometry, THREE.PointsMaterial>\n\nconst Chapter6_2 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const createPoints = (url: string, size = 0.5) => {\n    const particlesGeometry = new THREE.BufferGeometry();\n    const count = 10000;\n\n    // 设置缓冲区数组\n    const positions = new Float32Array(count * 3);\n    // 设置粒子顶点颜色\n    const colors = new Float32Array(count * 3);\n    // 设置顶点\n    for (let i = 0; i < count * 3; i++) {\n      positions[i] = (Math.random() - 0.5) * 100;\n      colors[i] = Math.random();\n    }\n    particlesGeometry.setAttribute(\n      \"position\",\n      new THREE.BufferAttribute(positions, 3)\n    );\n    particlesGeometry.setAttribute(\"color\", new THREE.BufferAttribute(colors, 3));\n\n    // 设置点材质\n    const pointsMaterial = new THREE.PointsMaterial();\n    pointsMaterial.size = 0.5;\n    pointsMaterial.color.set(0xfff000);\n    // 相机深度而衰减\n    pointsMaterial.sizeAttenuation = true;\n\n    // 载入纹理\n    const textureLoader = new THREE.TextureLoader();\n    const texture = textureLoader.load(url);\n    // 设置点材质纹理\n    pointsMaterial.map = texture;\n    pointsMaterial.alphaMap = texture;\n    pointsMaterial.transparent = true;\n    pointsMaterial.depthWrite = false;\n    pointsMaterial.blending = THREE.AdditiveBlending;\n    // 设置启动顶点颜色\n    pointsMaterial.vertexColors = true;\n\n    const points = new THREE.Points(particlesGeometry, pointsMaterial);\n    return points;\n  }\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    points_1 = createPoints(`/textures/particles/1.png`, 1.5);\n    points_2 = createPoints(`/textures/particles/1.png`, 1);\n    points_3 = createPoints(`/textures/particles/xh.png`, 2);\n    scene.add(points_1)\n    scene.add(points_2)\n    scene.add(points_3)\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n\n    //直线光源\n    const pointLight = new THREE.PointLight(0xff0000, 1);\n    pointLight.castShadow = true;\n    // 设置阴影贴图模糊度\n    pointLight.shadow.radius = 20;\n    // 设置阴影贴图的分辨率\n    pointLight.shadow.mapSize.set(512, 512);\n    pointLight.decay = 0;\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 10);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    // 开启场景中的阴影贴图\n    renderer.shadowMap.enabled = true;\n    renderer.physicallyCorrectLights = true;\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    \n    clock = new THREE.Clock();\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    let time = clock.getElapsedTime();\n    points_1.rotation.x = time * 0.3;\n    points_2.rotation.x = time * 0.5;\n    points_2.rotation.y = time * 0.4;\n    points_3.rotation.x = time * 0.2;\n    points_3.rotation.y = time * 0.2;\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"100%\", height: \"100%\" }}\n      ref={ref}\n    ></div>\n  );\n};\n\nexport default Chapter6_2;\n","/*\n * @Title: 点材质应用\n * @Author: huangjitao\n * @Date: 2022-10-19 11:21:41\n * @Description: 使用数学知识建立银河系\n */\n\nimport React from \"react\";\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport GUI from \"lil-gui\";\n\nlet scene: THREE.Scene,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  points: THREE.Points<THREE.BufferGeometry, THREE.PointsMaterial>,\n  geometry: THREE.BufferGeometry,\n  material: THREE.PointsMaterial\n\nconst params = {\n  count: 1000, // 粒子个数\n  size: 0.02,  // 粒子大小\n  radius: 5,  // 银河系半径\n  branch: 3,  // 银河系分支书\n  spin: 1, // 偏转角度\n  randomness: 0.2,  // 随机扩散\n  randomnessPower: 3, // 随机扩散幂\n  insideColor: '#ff6030',\n  outsideColor: '#1b3984',\n};\n\n\nconst Chapter6_3 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const generateGalaxy = () => {\n    if (points) {\n      geometry.dispose()\n      material.dispose()\n      scene.remove(points)\n    }\n\n    geometry = new THREE.BufferGeometry()\n    const positions = new Float32Array(params.count * 3)\n    const colors = new Float32Array(params.count * 3)\n    for (let i = 0; i < params.count; i++) {\n      const radius = Math.random() * params.radius;\n      // 根据所在的分支来获取坐标上的角度\n      const branchesAngle = ((i % params.branch) / params.branch) * Math.PI * 2;\n      // 设置偏转角度，将直线变成曲线\n      const spinAngle = radius * params.spin;\n\n      // 设置粒子颜色\n      const colorInside = new THREE.Color(params.insideColor)\n      const colorOutside = new THREE.Color(params.outsideColor)\n      const mixedColor = colorInside.clone()\n      mixedColor.lerp(colorOutside, radius / params.radius)\n      colors[i * 3] = mixedColor.r\n      colors[i * 3 + 1] = mixedColor.g\n      colors[i * 3 + 2] = mixedColor.b\n      // 设置粒子的随机扩散\n      const randomX = Math.random() ** params.randomnessPower\n        * (Math.random() < 0.5 ? 1 : -1)\n        * params.randomness\n        * radius\n      const randomY = Math.random() ** params.randomnessPower\n        * (Math.random() < 0.5 ? 1 : -1)\n        * params.randomness\n        * radius\n      const randomZ = Math.random() ** params.randomnessPower\n        * (Math.random() < 0.5 ? 1 : -1)\n        * params.randomness\n        * radius\n\n      positions[i * 3] = Math.cos(branchesAngle + spinAngle) * radius + randomX;\n      positions[i * 3 + 1] = randomY;\n      positions[i * 3 + 2] = Math.sin(branchesAngle + spinAngle) * radius + randomZ;\n    }\n    geometry.setAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\n    geometry.setAttribute(\"color\", new THREE.BufferAttribute(colors, 3));\n\n    material = new THREE.PointsMaterial({\n      size: params.size,\n      sizeAttenuation: true,\n      depthWrite: false,\n      blending: THREE.AdditiveBlending,\n      vertexColors: true,\n    });\n\n    points = new THREE.Points(geometry, material);\n    scene.add(points);\n  };\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    // 银河系粒子生成\n    generateGalaxy();\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n\n    //直线光源\n    const pointLight = new THREE.PointLight(0xff0000, 1);\n    pointLight.castShadow = true;\n    // 设置阴影贴图模糊度\n    pointLight.shadow.radius = 20;\n    // 设置阴影贴图的分辨率\n    pointLight.shadow.mapSize.set(512, 512);\n    pointLight.decay = 0;\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      100\n    );\n    // 设置相机位置\n    camera.position.set(4, 1.8, 4)\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    // 开启场景中的阴影贴图\n    renderer.shadowMap.enabled = true;\n    renderer.physicallyCorrectLights = true;\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n    controls.enableDamping = true\n    controls.zoomSpeed = 0.3\n\n    const gui = new GUI()\n    gui.add(controls, 'autoRotate')\n    gui.add(controls, 'autoRotateSpeed', 0.1, 10, 0.01)\n    gui.add(params, 'count', 100, 100000, 100).onFinishChange(generateGalaxy)\n    gui.add(params, 'size', 0.001, 0.1, 0.001).onFinishChange(generateGalaxy)\n    gui.add(params, 'radius', 0.01, 20, 0.01).onFinishChange(generateGalaxy)\n    gui.add(params, 'branch', 2, 20, 1).onFinishChange(generateGalaxy)\n    gui.add(params, 'spin', -5, 5, 0.001).onFinishChange(generateGalaxy)\n    gui.add(params, 'randomness', 0, 2, 0.001).onFinishChange(generateGalaxy)\n    gui.add(params, 'randomnessPower', 1, 10, 0.001).onFinishChange(generateGalaxy)\n    gui.addColor(params, 'insideColor').onFinishChange(generateGalaxy)\n    gui.addColor(params, 'outsideColor').onFinishChange(generateGalaxy)\n    gui.close()\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"100%\", height: \"100%\" }}\n      ref={ref}\n    ></div>\n  );\n};\n\nexport default Chapter6_3;\n","/*\n * @Title: 光线投射\n * @Author: huangjitao\n * @Date: 2022-10-21 10:39:11\n * @Description: 光线投射 Raycaster 的使用\n */\n\nimport React from \"react\";\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nlet scene: THREE.Scene,\n  renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  controls: OrbitControls,\n  cubeArr: THREE.Mesh<THREE.BoxGeometry, THREE.MeshBasicMaterial>[] = [],\n  rayCaster: THREE.Raycaster,\n  mouse: THREE.Vector2,\n  redMaterial: THREE.MeshBasicMaterial,\n  material: THREE.MeshBasicMaterial\n\n\nconst Chapter7_1 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    scene = new THREE.Scene();\n\n    const boxGeometry = new THREE.BoxGeometry(1, 1, 1);\n    material = new THREE.MeshBasicMaterial({ wireframe: true });\n    redMaterial = new THREE.MeshBasicMaterial({ color: '#ff0000' })\n    // 创建立方体\n    for (let i = 0; i < 5; i++) {\n      for (let j = 0; j < 5; j++) {\n        for (let k = 0; k < 5; k++) {\n          const cube = new THREE.Mesh(boxGeometry, material)\n          cube.position.set(i, j, k)\n          scene.add(cube)\n          cubeArr.push(cube)\n        }\n      }\n    }\n\n    // 创建光线投射\n    rayCaster = new THREE.Raycaster();\n    // 创建鼠标位置对象\n    mouse = new THREE.Vector2();\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n\n    //直线光源\n    const pointLight = new THREE.PointLight(0xff0000, 1);\n    pointLight.castShadow = true;\n    // 设置阴影贴图模糊度\n    pointLight.shadow.radius = 20;\n    // 设置阴影贴图的分辨率\n    pointLight.shadow.mapSize.set(512, 512);\n    pointLight.decay = 0;\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      300\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 20);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    // 开启场景中的阴影贴图\n    renderer.shadowMap.enabled = true;\n    renderer.physicallyCorrectLights = true;\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  function render() {\n    controls.update();\n    renderer.render(scene, camera);\n    // 渲染下一帧的时候就会调用render函数\n    requestAnimationFrame(render);\n  }\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  const mouseClick = (event: MouseEvent) => {\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n    mouse.x = (event.offsetX / width) * 2 - 1;\n    mouse.y = -((event.offsetY / height) * 2 - 1);\n    rayCaster.setFromCamera(mouse, camera);\n    let result = rayCaster.intersectObjects(cubeArr);\n    result.forEach((item: any) => {\n      item.object.material = redMaterial\n    });\n    if (result.length === 0) {\n      cubeArr.forEach((item: any) => {\n        item.material = material\n      });\n    }\n  }\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n    window.addEventListener(\"click\", mouseClick)\n    return () => {\n      window.removeEventListener(\"click\", mouseClick)\n    }\n  }, [size?.width, size?.height]);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"100%\", height: \"100%\" }}\n      ref={ref}\n    ></div>\n  );\n};\n\nexport default Chapter7_1;\n","/*\n * @Title: 3d物理引擎\n * @Author: huangjitao\n * @Date: 2022-11-14 15:02:40\n * @Description: 使用cannon-es创建物理世界\n */\n\nimport React from \"react\";\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport * as CANNON from \"cannon-es\";\n\nlet renderer: THREE.WebGLRenderer, camera: THREE.PerspectiveCamera;\n\nconst Chapter9_1 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    const scene = new THREE.Scene();\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n    //直线光源\n    const dirLight = new THREE.DirectionalLight(0xffffff, 1);\n    dirLight.castShadow = true;\n    scene.add(dirLight);\n\n    /** --- 创建球和平面 --- */\n    const sphereGeometry = new THREE.SphereGeometry(1, 20, 20);\n    const sphereMaterial = new THREE.MeshStandardMaterial();\n    const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);\n    sphere.castShadow = true;\n    scene.add(sphere);\n\n    const floor = new THREE.Mesh(\n      new THREE.PlaneGeometry(20, 20),\n      new THREE.MeshStandardMaterial()\n    );\n    floor.position.set(0, -5, 0);\n    floor.rotation.x = -Math.PI / 2;\n    floor.receiveShadow = true;\n    scene.add(floor);\n\n    /** --- 创建物理世界 --- */\n    const world = new CANNON.World();\n    // 仅设置y轴（垂直方向）的重力加速度\n    world.gravity.set(0, -9.8, 0);\n    // 创建物理小球\n    const sphereShape = new CANNON.Sphere(1);\n    // 设置物理小球材质\n    const sphereWorldMaterial = new CANNON.Material();\n    // 创建物理世界的物体\n    const sphereBody = new CANNON.Body({\n      shape: sphereShape,\n      material: sphereWorldMaterial,\n      mass: 1, // 小球质量\n      position: new CANNON.Vec3(0, 0, 0), // 起始位置和three.js中的小球相同\n    });\n    world.addBody(sphereBody);\n\n    // 创建物理地面\n    const floorShape = new CANNON.Plane();\n    const floorBody = new CANNON.Body();\n    // 设置质量为0时，可以使得地面不动\n    floorBody.mass = 0;\n    floorBody.addShape(floorShape);\n    // 地面位置\n    floorBody.position.set(0, -5, 0);\n    // 旋转地面的位置\n    floorBody.quaternion.setFromAxisAngle(\n      new CANNON.Vec3(1, 0, 0),\n      -Math.PI / 2\n    );\n    world.addBody(floorBody);\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      300\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 18);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    // 开启场景中的阴影贴图\n    renderer.shadowMap.enabled = true;\n    renderer.physicallyCorrectLights = true;\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    const controls = new OrbitControls(camera, renderer.domElement);\n\n    const clock = new THREE.Clock();\n\n    function render() {\n      let deltaTime = clock.getDelta();\n      // 更新物理引擎里世界的物体\n      world.step(1 / 120, deltaTime);\n      sphere.position.copy(sphereBody.position as any);\n\n      controls.update();\n      renderer.render(scene, camera);\n      // 渲染下一帧的时候就会调用render函数\n      requestAnimationFrame(render);\n    }\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"100%\", height: \"100%\" }}\n      ref={ref}\n    ></div>\n  );\n};\n\nexport default Chapter9_1;\n","/*\n * @Title: 物体之间的相互作用力\n * @Author: huangjitao\n * @Date: 2022-11-15 10:01:08\n * @Description: 创建一个具有物理效果的真实世界\n */\n\nimport React from \"react\";\nimport { useSize } from \"ahooks\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport * as CANNON from \"cannon-es\";\n\nlet renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  cubeArr: { mesh: THREE.Mesh; body: CANNON.Body }[] = [];\n\nconst Chapter9_2 = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n\n  const initThree = () => {\n    /** --- 创建一个场景 --- */\n    const scene = new THREE.Scene();\n\n    /** --- 设置光源 --- */\n    // 环境光\n    const ambient = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambient);\n    //直线光源\n    const dirLight = new THREE.DirectionalLight(0xffffff, 1);\n    dirLight.castShadow = true;\n    scene.add(dirLight);\n\n    // 创建物理世界\n    const world = new CANNON.World();\n    // 仅设置y轴（垂直方向）的重力加速度\n    world.gravity.set(0, -9.8, 0);\n    // 创建击打声音\n    const hitSound = new Audio(\"/audio/metal_hit.mp3\");\n    // 设置物理立方体材质\n    const cubeWorldMaterial = new CANNON.Material(\"sphere\");\n\n    const createCube = () => {\n      // 创建立方体\n      const cubeGeometry = new THREE.BoxGeometry(1, 1, 1);\n      const cubeMaterial = new THREE.MeshStandardMaterial();\n      const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n      cube.castShadow = true;\n      scene.add(cube);\n\n      // 创建物理立方体\n      const cubeShape = new CANNON.Sphere(1);\n      // 创建物理世界的物体\n      const cubeBody = new CANNON.Body({\n        shape: cubeShape,\n        material: cubeWorldMaterial,\n        mass: 1,\n        position: new CANNON.Vec3(0, 0, 0),\n      });\n      cubeBody.applyLocalForce(\n        new CANNON.Vec3(300, 0, 0), //添加的力的大小和方向\n        new CANNON.Vec3(0, 0, 0) //施加的力所在的位置\n      );\n      world.addBody(cubeBody);\n\n      // 添加监听碰撞事件\n      const HitEvent = (e: any) => {\n        // 获取碰撞的强度\n        const impactStrength = e.contact.getImpactVelocityAlongNormal();\n        console.log(impactStrength);\n        if (impactStrength > 2) {\n          //   重新从零开始播放\n          hitSound.currentTime = 0;\n          hitSound.volume = impactStrength / 12;\n          hitSound.play();\n        }\n      };\n      cubeBody.addEventListener(\"collide\", HitEvent);\n\n      cubeArr.push({\n        mesh: cube,\n        body: cubeBody,\n      });\n    };\n\n    window.addEventListener(\"click\", createCube);\n\n    const floor = new THREE.Mesh(\n      new THREE.PlaneGeometry(100, 100),\n      new THREE.MeshStandardMaterial()\n    );\n    floor.position.set(0, -5, 0);\n    floor.rotation.x = -Math.PI / 2;\n    floor.receiveShadow = true;\n    scene.add(floor);\n\n    // 创建物理地面\n    const floorShape = new CANNON.Plane();\n    const floorBody = new CANNON.Body();\n    // 设置物理地面材质\n    const floorMaterial = new CANNON.Material(\"floor\");\n    floorBody.material = floorMaterial;\n    // 设置质量为0时，可以使得地面不动\n    floorBody.mass = 0;\n    floorBody.addShape(floorShape);\n    // 地面位置\n    floorBody.position.set(0, -5, 0);\n    // 旋转地面的位置\n    floorBody.quaternion.setFromAxisAngle(\n      new CANNON.Vec3(1, 0, 0),\n      -Math.PI / 2\n    );\n    world.addBody(floorBody);\n\n    // 设置立方体和地面材质的碰撞参数\n    const defaultContactMaterial = new CANNON.ContactMaterial(\n      cubeWorldMaterial,\n      floorMaterial,\n      {\n        friction: 0.1, // 设置摩擦力\n        restitution: 0.7, // 设置弹力\n      }\n    );\n    world.addContactMaterial(defaultContactMaterial);\n    // 设置世界碰撞的默认材料，如果材料没有设置，都用这个\n    world.defaultContactMaterial = defaultContactMaterial;\n\n\n    /** --- 相机设置 --- */\n    // 创建相机\n    camera = new THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      300\n    );\n    // 设置相机位置\n    camera.position.set(0, 0, 18);\n    //设置相机方向(指向的场景对象)\n    camera.lookAt(scene.position);\n\n    // 创建渲染器\n    renderer = new THREE.WebGLRenderer();\n    // 开启场景中的阴影贴图\n    renderer.shadowMap.enabled = true;\n    renderer.physicallyCorrectLights = true;\n    renderer.render(scene, camera);\n    ref.current?.appendChild(renderer.domElement); //body元素中插入canvas对象\n\n    /** ---创建轨道控制器--- */\n    const controls = new OrbitControls(camera, renderer.domElement);\n\n    const clock = new THREE.Clock();\n\n    function render() {\n      let deltaTime = clock.getDelta();\n      // 更新物理引擎里世界的物体\n      world.step(1 / 120, deltaTime);\n      // 更新物理引擎里世界的物体\n      cubeArr.forEach((item) => {\n        item.mesh.position.copy(item.body.position as any);\n        // 设置渲染的物体跟随物理的物体旋转\n        item.mesh.quaternion.copy(item.body.quaternion as any);\n      });\n\n      controls.update();\n      renderer.render(scene, camera);\n      // 渲染下一帧的时候就会调用render函数\n      requestAnimationFrame(render);\n    }\n    render();\n  };\n\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = Number(size?.width); //窗口宽度\n    const height = Number(size?.height); //窗口高度\n\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  useEffect(() => {\n    if (size?.width && size?.height) {\n      // 场景大小根据浏览器自适应\n      changeSize();\n    }\n  }, [size?.width, size?.height]);\n\n  const fullScreen = () => {\n    const fullScreenElement = document.fullscreenElement;\n    if (!fullScreenElement) {\n      // 让画布对象全屏\n      renderer.domElement.requestFullscreen();\n    } else {\n      //   退出全屏，使用document对象\n      document.exitFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    // 初始化three场景\n    initThree();\n    window.addEventListener(\"dblclick\", fullScreen);\n    return () => {\n      window.removeEventListener(\"dblclick\", fullScreen);\n    };\n  }, []);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"100%\", height: \"100%\" }}\n      ref={ref}\n    ></div>\n  );\n};\n\nexport default Chapter9_2;\n","/*\n * @Title: 3d全屏滚动实现页面\n * @Author: huangjitao\n * @Date: 2022-10-25 15:22:12\n * @Description: description of this file\n */\n\nimport { useEffect } from \"react\";\nimport \"./index.css\";\nimport * as THREE from \"three\";\nimport * as dat from \"lil-gui\";\nimport gsap from 'gsap'\n\nlet renderer: THREE.WebGLRenderer,\n  camera: THREE.PerspectiveCamera,\n  mouse = { x: 0, y: 0 },\n  previousTime = 0,\n  sectionMeshes: THREE.Mesh< THREE.BufferGeometry, THREE.MeshToonMaterial >[] = [];\n\nconst parameters = {\n  materialColor: \"#FFF59D\",\n};\nlet objectsDistance = 5;\nconst particlesCount = 200;\nlet currentSection = 0;\nconst isPortrait = window.innerWidth < window.innerHeight; // 是否横屏\n\nconst ScrollFull3d = () => {\n  const initThree = () => {\n    // Canvas画布\n    const canvas = document.querySelector(\"#mainCanvas\") as HTMLCanvasElement;\n    // Scene场景\n    const scene = new THREE.Scene();\n    // 设置相机\n    const cameraGroup = new THREE.Group();\n    scene.add(cameraGroup);\n    const sizes = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    };\n    camera = new THREE.PerspectiveCamera(\n      75,\n      sizes.width / sizes.height,\n      0.1,\n      100\n    );\n    camera.position.set(0, 0, 4);\n    cameraGroup.add(camera);\n    if (isPortrait) {\n      camera.position.setZ(8)\n      objectsDistance = 11\n    }\n\n    // 设置材质\n    const textureLoader = new THREE.TextureLoader();\n    const gradientTexture = textureLoader.load(\n      \"https://gw.alicdn.com/imgextra/i1/O1CN01Kv3xWT1kImpSDZI8n_!!6000000004661-0-tps-5-1.jpg\"\n    );\n    gradientTexture.magFilter = THREE.NearestFilter;\n    const material = new THREE.MeshToonMaterial({\n      color: parameters.materialColor,\n      gradientMap: gradientTexture,\n    });\n\n    // 设置Meshes\n    const mesh1 = new THREE.Mesh(\n      new THREE.TorusGeometry(1, 0.4, 16, 60),\n      material\n    );\n    const mesh2 = new THREE.Mesh(new THREE.ConeGeometry(1, 2, 32), material);\n    const mesh3 = new THREE.Mesh(\n      new THREE.TorusKnotGeometry(0.8, 0.35, 100, 16),\n      material\n    );\n    scene.add(mesh1, mesh2, mesh3);\n\n    mesh1.position.y = -objectsDistance * 0;\n    mesh2.position.y = -objectsDistance * 1;\n    mesh3.position.y = -objectsDistance * 2;\n    sectionMeshes = [mesh1, mesh2, mesh3];\n\n    // 设置粒子效果\n    const positions = new Float32Array(particlesCount * 3);\n    for (let i = 0; i < particlesCount; i++) {\n      positions[i * 3 + 0] = (Math.random() - 0.5) * 10;\n      positions[i * 3 + 1] = objectsDistance * 0.5 - Math.random() * objectsDistance * sectionMeshes.length;\n      positions[i * 3 + 2] = (Math.random() - 0.5) * 10;\n    }\n    const particlesGeometry = new THREE.BufferGeometry();\n    particlesGeometry.setAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\n    const particlesMaterial = new THREE.PointsMaterial({\n      color: parameters.materialColor,\n      sizeAttenuation: true,\n      size: 0.03,\n    });\n    const particels = new THREE.Points(particlesGeometry, particlesMaterial);\n    scene.add(particels);\n    sectionMeshes.forEach((mesh, index) => {\n      if (isPortrait) {\n        mesh.position.setY(-objectsDistance * index)\n      } else {\n        mesh.position.setX(index % 2 === 0 ? 2 : -2)\n        mesh.position.setY(-objectsDistance * index)\n      }\n    });\n\n    // 设置灯光\n    const directionLight = new THREE.DirectionalLight();\n    directionLight.position.set(1, 1, 0);\n    const ambientLight = new THREE.AmbientLight(\n      new THREE.Color(\"#ffffff\"),\n      0.28\n    );\n    scene.add(ambientLight, directionLight);\n\n    renderer = new THREE.WebGLRenderer({\n      canvas,\n      antialias: true,\n      alpha: true,\n    });\n    renderer.setSize(sizes.width, sizes.height);\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n\n    // 设置渲染方法\n    const clock = new THREE.Clock();\n    const render = () => {\n      const elapsedTime = clock.getElapsedTime();\n      const deltaTime = elapsedTime - previousTime;\n      previousTime = elapsedTime;\n      // 设置mesh动画\n      sectionMeshes.forEach((mesh, index) => {\n        mesh.rotation.set(deltaTime * 0.1 + mesh.rotation.x, deltaTime * 0.1 + mesh.rotation.y, 0);\n      });\n      const scrollY = window.scrollY;\n      const height = window.innerHeight;\n      camera.position.setY((-scrollY / height) * objectsDistance);\n      if (mouse.x && mouse.y) {\n        const parallaxX = mouse.x * 0.5;\n        const parallaxY = mouse.y * 0.5;\n        cameraGroup.position.x +=\n          (parallaxX - cameraGroup.position.x) * 5 * deltaTime;\n        cameraGroup.position.y +=\n          (parallaxY - cameraGroup.position.y) * 5 * deltaTime;\n      }\n      renderer.render(scene, camera);\n      requestAnimationFrame(render);\n    };\n\n    render();\n\n    const gui = new dat.GUI();\n    gui.addColor(parameters, \"materialColor\").onChange(() => {\n      material.color.set(parameters.materialColor);\n      particlesMaterial.color.set(parameters.materialColor)\n    });\n  };\n\n  // three.js场景自适应\n  const changeSize = () => {\n    /** --- 相机设置 --- */\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    // 更新摄像头\n    camera.aspect = width / height;\n    // 更新摄像机的投影矩阵\n    camera.updateProjectionMatrix();\n    //  更新渲染区域尺寸\n    renderer.setSize(width, height);\n    //  设置渲染器的像素比\n    renderer.setPixelRatio(window.devicePixelRatio);\n  };\n\n  // 鼠标滑动设置视差效果\n  const mouseMove = (event: MouseEvent) => {\n    const width = window.innerWidth; //窗口宽度\n    const height = window.innerHeight; //窗口高度\n    mouse.x = (event.clientX / width) * 2 - 1;\n    mouse.y = -((event.clientY / height) * 2 - 1);\n  };\n\n  // 设置滚动动画\n  const scrollAnimation = () => {\n    const { scrollY, innerHeight } = window\n    const newSection = Math.round(scrollY / innerHeight)\n    if (currentSection !== newSection) {\n      currentSection = newSection;\n      console.log('changed', currentSection)\n      gsap.to(sectionMeshes[currentSection].rotation, {\n        duration: 1.5,\n        ease: 'power2.inOut',\n        x: '+=6',\n        y: '+=3',\n      })\n    }\n  }\n\n  useEffect(() => {\n    initThree();\n    window.addEventListener(\"resize\", changeSize);\n    window.addEventListener(\"mousemove\", mouseMove);\n    window.addEventListener(\"scroll\", scrollAnimation);\n    return () => {\n      window.removeEventListener(\"resize\", changeSize);\n      window.removeEventListener(\"mousemove\", mouseMove);\n      window.removeEventListener(\"scroll\", scrollAnimation);\n    };\n  }, []);\n\n  return (\n    <div className=\"scroll3d\">\n      <canvas id=\"mainCanvas\" className=\"webgl\"></canvas>\n      <section className=\"section\">\n        <h1>Hello</h1>\n      </section>\n      <section className=\"section\">\n        <h2>My projects</h2>\n      </section>\n      <section className=\"section\">\n        <h2>Contact me</h2>\n      </section>\n    </div>\n  );\n};\n\nexport default ScrollFull3d;\n","/*\n * @Descripttion: three.js基本介绍\n * @Author: huangjitao\n * @Date: 2021-08-05 19:36:19\n * @Function: 该文件用途描述\n */\n\nimport { Typography } from \"antd\";\n\nconst { Title, Text, Paragraph } = Typography\n\nconst Chapter1_1 = () => {\n\n  return (\n    <div style={{ padding: '50px' }}>\n      <Typography>\n        <Title level={2}>什么是Three.js</Title>\n        <ul>\n          <li>Three.js是基于原生WebGL封装运行的三维引擎。</li>\n          <li>WebGL是一种Javascript的3D图形接口，把JavaScript和OpenGL ES 2.0结合在一起。</li>\n          <li>Unity、UnReal等是客户端的三维引擎; Three.js则是网页端的三维引擎。</li>\n        </ul>\n\n        <Title level={2}>为什么要使用Three.js</Title>\n        <ul>\n          <li>利用Three.JS可以制作出很多酷炫的3D动画，并且Three.js还可以通过鼠标、键盘、拖拽等事件形成交互，在页面上增加一些3D动画和3D交互可以产生更好的用户体验。</li>\n          <li>通过Three.JS可以实现全景视图，这些全景视图应用在房产、家装行业能够带来更直观的视觉体验。在电商行业利用Three.JS可以实现产品的3D效果，这样用户就可以360度全方位地观察商品了，给用户带来更好的购物体验。</li>\n          <li>使用Three.JS还可以制作类似微信跳一跳那样的小游戏。随着技术的发展、基础网络的建设，web3D技术还能得到更广泛的应用。</li>\n        </ul>\n      </Typography>\n    </div>\n  );\n}\n\nexport default Chapter1_1\n","/*\n * @Title: webgl绘制\n * @Author: huangjitao\n * @Date: 2022-11-23 11:35:04\n * @Description: 使用webgl绘制一个三角形\n */\n\nimport React, { useEffect} from \"react\";\n\nconst Chapter10_1 = () => {\n  \n  useEffect(() => {\n    const canvas = document.getElementById(\"webgl\") as HTMLCanvasElement;\n    const gl = canvas.getContext(\"webgl\") as WebGLRenderingContext;\n    gl.viewport(0, 0, canvas.width, canvas.height);\n\n    // 创建顶点着色器\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER) as WebGLShader;\n    // 设置顶点着色器的源码\n    gl.shaderSource(\n      vertexShader,\n      `\n      attribute vec4 a_Position;\n      void main() {\n        gl_Position = a_Position;\n      }\n    `\n    );\n    // 编译顶点着色器\n    gl.compileShader(vertexShader);\n\n    // 创建片元着色器\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER) as WebGLShader;\n    // 设置片元着色器的源码\n    gl.shaderSource(\n      fragmentShader,\n      `\n      void main() {\n        gl_FragColor = vec4(1.0, 0, 0, 1.0); \n      }\n    `\n    );\n    // 编译片元着色器\n    gl.compileShader(fragmentShader);\n\n    // 创建链接（link）着色器的程序\n    const program = gl.createProgram() as WebGLProgram;\n    // 将顶点着色器和片元着色器链接到程序上\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    // 链接程序\n    gl.linkProgram(program);\n    // 使用程序\n    gl.useProgram(program)\n\n    // 创建顶点缓冲区对象\n    const vertexBuffer = gl.createBuffer();\n    // 绑定顶点缓冲区对象\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n    // 向顶点缓冲区对象写入数据\n    const vertices = new Float32Array([0, 0.5, -0.5, -0.5, 0.5, -0.5]);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n\n    // 获取顶点着色器中a_Position的位置\n    const a_Position = gl.getAttribLocation(program, \"a_Position\");\n    // 将顶点缓冲区对象分配给a_Position变量\n    gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 0, 0);\n    // 启用顶点着色器中的a_Position变量\n    gl.enableVertexAttribArray(a_Position);\n\n    // 绘制三角形\n    gl.drawArrays(gl.TRIANGLES, 0, 3);\n  }, []);\n\n  return (\n    <div style={{ width: \"100%\", height: \"100%\" }}>\n      <canvas\n        id=\"webgl\"\n        style={{ width: \"100%\", height: \"100%\" }}\n      />\n    </div>\n  );\n};\n\nexport default Chapter10_1;\n","/*\n * @Title: webgl动画\n * @Author: huangjitao\n * @Date: 2022-11-24 10:28:47\n * @Description: 使用webgl绘制三角形缩放动画\n */\n\nimport React, { useEffect } from \"react\";\n\nconst Chapter10_2 = () => {\n  useEffect(() => {\n    const canvas = document.getElementById(\"webgl\") as HTMLCanvasElement;\n    // canvas.width = window.innerWidth;\n    // canvas.height = window.innerHeight;\n    const gl = canvas.getContext(\"webgl\") as WebGLRenderingContext;\n    gl.viewport(0, 0, canvas.width, canvas.height);\n\n    // 创建顶点着色器\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER) as WebGLShader;\n    // 设置顶点着色器的源码\n    gl.shaderSource(\n      vertexShader,\n      `\n      attribute vec4 a_Position;\n      uniform mat4 u_Mat;\n      varying vec4 v_Color;\n      void main() {\n        gl_Position = u_Mat * a_Position;\n        v_Color = gl_Position;\n      }\n    `\n    );\n    // 编译顶点着色器\n    gl.compileShader(vertexShader);\n\n    // 创建片元着色器\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER) as WebGLShader;\n    // 设置片元着色器的源码\n    gl.shaderSource(\n      fragmentShader,\n      `\n      precision mediump float;\n      varying vec4 v_Color;\n      void main() {\n        gl_FragColor = v_Color; \n      }\n    `\n    );\n    // 编译片元着色器\n    gl.compileShader(fragmentShader);\n\n    // 创建链接（link）着色器的程序\n    const program = gl.createProgram() as WebGLProgram;\n    // 将顶点着色器和片元着色器链接到程序上\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    // 链接程序\n    gl.linkProgram(program);\n    // 使用程序\n    gl.useProgram(program);\n\n    // 创建顶点缓冲区对象\n    const vertexBuffer = gl.createBuffer();\n    // 绑定顶点缓冲区对象\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n    // 向顶点缓冲区对象写入数据\n    const vertices = new Float32Array([0.0, 0.5, -0.5, -0.5, 0.5, -0.5]);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n\n    // 获取顶点着色器中a_Position的位置\n    const a_Position = gl.getAttribLocation(program, \"a_Position\");\n    // 将顶点缓冲区对象分配给a_Position变量\n    gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 0, 0);\n    // 启用顶点着色器中的a_Position变量\n    gl.enableVertexAttribArray(a_Position);\n\n    // 绘制三角形缩放动画\n    const scale = {\n      x: 1.5,\n      y: 1.5,\n      z: 1.5,\n    };\n    function animate() {\n      if (scale.x <= -1.5) {\n        scale.x = 1.5\n      } else {\n        scale.x -= 0.01\n      }\n      const mat = new Float32Array([\n        scale.x, 0.0, 0.0, 0.0,\n        0.0, scale.x, 0.0, 0.0,\n        0.0, 0.0, scale.x, 0.0,\n        0.0, 0.0, 0.0, 1.0,\n      ]);\n      const u_Mat = gl.getUniformLocation(program, 'u_Mat');\n      gl.uniformMatrix4fv(u_Mat, false, mat);\n      // 绘制三角形\n      gl.drawArrays(gl.TRIANGLES, 0, 3);\n      requestAnimationFrame(animate);\n    }\n\n    animate();\n  }, []);\n\n  return (\n    <div style={{ width: \"100%\", height: \"100%\" }}>\n      <canvas id=\"webgl\" style={{ width: \"100%\", height: \"100%\" }} />\n    </div>\n  );\n};\n\nexport default Chapter10_2;\n","const VertexShader = /*glsl*/`\n  void main(){\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n  }\n`\n\nexport default VertexShader","const FragmentShader = /*glsl*/`\n  void main(){\n    gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n  }\n`\n\nexport default FragmentShader","const VertexShader = /*glsl*/ `\n  precision lowp float;\n  attribute vec3 position;\n  attribute vec2 uv;\n\n  uniform mat4 projectionMatrix;\n  uniform mat4 viewMatrix;\n  uniform mat4 modelMatrix;\n  uniform float uTime;\n  uniform sampler2D uTexture;\n\n  varying vec2 v_Uv;\n  varying float v_Elevation;\n\n  void main(){\n    v_Uv = uv;\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n    modelPosition.z = sin((modelPosition.x + uTime) * 10.0) * 0.05 ;\n    modelPosition.z += sin((modelPosition.y + uTime)  * 10.0) * 0.05 ;\n    v_Elevation = modelPosition.z;\n\n    gl_Position = projectionMatrix * viewMatrix * modelPosition ;\n  }\n`;\n\nexport default VertexShader;\n","const FragmentShader = /*glsl*/ `\n  precision lowp float;\n  varying vec2 v_Uv;\n  varying float v_Elevation;\n\n  uniform sampler2D uTexture; \n\n  void main(){\n      // 不使用材质，制作波浪效果\n      // gl_FragColor = vec4(v_Uv, 0.0, 1.0);\n      // float height = v_Elevation + 0.05 * 10.0;\n      // gl_FragColor = vec4(1.0 * height, 0.0, 0.0, 1.0);\n\n      // 使用材质，制作旗帜飘扬效果\n      float height = v_Elevation + 0.05 * 20.0;\n      vec4 textureColor = texture2D(uTexture, v_Uv);\n      textureColor.rgb *= height;\n      gl_FragColor = textureColor;\n  }\n`;\n\nexport default FragmentShader;\n","const FragmentShader_1 = /*glsl*/ `\n  precision lowp float;\n  uniform float uTime;\n  uniform float uScale;\n  varying vec2 vUv; \n\n  void main(){\n    // 通过顶点对应的uv，决定每一个像素在uv图像的位置，通过这个位置x,y决定颜色\n    gl_FragColor = vec4(vUv,0,1) ;\n  }\n`;\n\nexport default FragmentShader_1;\n","const VertexShader = /*glsl*/ `\n  varying vec2 vUv;\n  precision lowp float;\n\n  void main(){\n    vec4 modelPosition = modelMatrix * vec4( position, 1.0 );\n    vUv = uv;\n    gl_Position =  projectionMatrix * viewMatrix * modelPosition;\n  }\n`;\n\nexport default VertexShader;\n","const FragmentShader_2 = /*glsl*/ `\n  precision lowp float;\n  uniform float uTime;\n  uniform float uScale;\n  varying vec2 vUv; \n\n  void main(){\n    // 利用通过取模达到反复效果\n    float strength = mod(vUv.y * 10.0 , 1.0) ;\n    gl_FragColor = vec4(strength, strength, strength, 1);\n  }\n`;\n\nexport default FragmentShader_2;\n","const FragmentShader_3 = /*glsl*/ `\n  precision lowp float;\n  uniform float uTime;\n  uniform float uScale;\n  varying vec2 vUv; \n\n  void main(){\n    // 条纹相加\n    float strength = step(0.8, mod(vUv.x * 10.0 , 1.0));\n    strength += step(0.8, mod(vUv.y * 10.0 , 1.0));\n    gl_FragColor =vec4(strength, strength, strength, 1);\n  }\n`;\n\nexport default FragmentShader_3;\n","const FragmentShader_4 = /*glsl*/ `\n  precision lowp float;\n  uniform float uTime;\n  uniform float uScale;\n  varying vec2 vUv; \n\n  void main(){\n    // 利用绝对值\n    float strength = abs(vUv.x - 0.5) ;\n    gl_FragColor =vec4(strength,strength,strength,1);\n  }\n`;\n\nexport default FragmentShader_4;\n","const FragmentShader_5 = /*glsl*/ `\n  precision lowp float;\n  uniform float uTime;\n  uniform float uScale;\n  varying vec2 vUv; \n\n  void main(){\n    // 小日本国旗\n    float strength = step(0.5,distance(vUv,vec2(0.5))+0.25);\n    gl_FragColor =vec4(strength,strength,strength,1);\n  }\n`;\n\nexport default FragmentShader_5;","const FragmentShader_6 = /*glsl*/ `\n  precision lowp float;\n  uniform float uTime;\n  uniform float uScale;\n  varying vec2 vUv;\n\n  vec4 permute(vec4 x) {\n    return mod(((x*34.0)+1.0)*x, 289.0);\n  }\n\n  vec2 fade(vec2 t) {\n    return t*t*t*(t*(t*6.0-15.0)+10.0);\n  }\n\n  float cnoise(vec2 P) {\n    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n    Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n    vec4 ix = Pi.xzxz;\n    vec4 iy = Pi.yyww;\n    vec4 fx = Pf.xzxz;\n    vec4 fy = Pf.yyww;\n    vec4 i = permute(permute(ix) + iy);\n    vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n    vec4 gy = abs(gx) - 0.5;\n    vec4 tx = floor(gx + 0.5);\n    gx = gx - tx;\n    vec2 g00 = vec2(gx.x,gy.x);\n    vec2 g10 = vec2(gx.y,gy.y);\n    vec2 g01 = vec2(gx.z,gy.z);\n    vec2 g11 = vec2(gx.w,gy.w);\n    vec4 norm = 1.79284291400159 - 0.85373472095314 * vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n    g00 *= norm.x;\n    g01 *= norm.y;\n    g10 *= norm.z;\n    g11 *= norm.w;\n    float n00 = dot(g00, vec2(fx.x, fy.x));\n    float n10 = dot(g10, vec2(fx.y, fy.y));\n    float n01 = dot(g01, vec2(fx.z, fy.z));\n    float n11 = dot(g11, vec2(fx.w, fy.w));\n    vec2 fade_xy = fade(Pf.xy);\n    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n    return 2.3 * n_xy;\n  } \n\n  void main(){\n    // 通过时间实现动态选择\n    vec3 purpleColor = vec3(1.0, 0.0, 1.0);\n    vec3 greenColor = vec3(1.0, 1.0, 1.0);\n    vec3 uvColor = vec3(vUv,1.0);\n    float strength = step(0.9,sin(cnoise(vUv * 10.0)*20.0))  ;\n\n    vec3 mixColor =  mix(greenColor,uvColor,strength);\n    // gl_FragColor =vec4(mixColor,1.0);\n    gl_FragColor =vec4(mixColor,1.0);\n  }\n`;\n\nexport default FragmentShader_6;","const VertexShader = /*glsl*/ `\n  vprecision lowp float;\n  varying vec4 vPosition;\n  varying vec4 gPosition;\n\n  void main(){\n    vec4 modelPosition = modelMatrix * vec4( position, 1.0 );\n\n    vPosition = modelPosition;\n    gPosition = vec4( position, 1.0 );\n    gl_Position =  projectionMatrix * viewMatrix * modelPosition;\n  }\n`;\n\nexport default VertexShader;\n","const FragmentShader = /*glsl*/ `\n  precision lowp float;\n  varying vec4 vPosition;\n  varying vec4 gPosition;\n\n  void main(){\n    vec4 redColor = vec4(1,0,0,1);\n    vec4 yellowColor = vec4(1,1,0.5,1);\n    vec4 mixColor = mix(yellowColor,redColor,gPosition.y/3.0);\n\n    if(gl_FrontFacing){\n      gl_FragColor = vec4(mixColor.xyz-(vPosition.y-20.0)/80.0-0.1,1);\n    }else{\n      gl_FragColor = vec4(mixColor.xyz,1);\n    }\n  }\n`;\n\nexport default FragmentShader;\n","/*\n * @Title: 3d全屏滚动\n * @Author: huangjitao\n * @Date: 2022-10-25 15:18:11\n * @Description: description of this file\n */\n\n\nimport { Typography } from \"antd\";\nimport { Link } from \"react-router-dom\";\n\nconst { Title } = Typography\n\nconst Chapter8_1 = () => {\n\n  return (\n    <div style={{ padding: '50px' }}>\n      <Typography>\n        <Title level={2}>\n          <Link to=\"/pages/scrollFull3d\">3d全屏滚动</Link>\n        </Title>\n      </Typography>\n    </div>\n  );\n}\n\nexport default Chapter8_1","/*\n * @Descripttion: 菜单配置\n * @Author: huangjitao\n * @Date: 2021-08-04 20:56:55\n * @Function: 菜单页面的路由配置\n */\n\nimport Chapter1_1 from \"../pages/chapter1-1\";\nimport Chapter1_2 from \"../pages/chapter1-2\";\nimport Chapter10_1 from \"../pages/chapter10-1\";\nimport Chapter10_2 from \"../pages/chapter10-2\";\nimport Chapter11_1 from \"../pages/chapter11-1\";\nimport Chapter11_2 from \"../pages/chapter11-2\";\nimport Chapter12_1 from \"../pages/chapter12-1\";\nimport Chapter12_2 from \"../pages/chapter12-2\";\nimport Chapter2_1 from \"../pages/chapter2-1\";\nimport Chapter2_2 from \"../pages/chapter2-2\";\nimport Chapter2_3 from \"../pages/chapter2-3\";\nimport Chapter3_1 from \"../pages/chapter3-1\";\nimport Chapter3_2 from \"../pages/chapter3-2\";\nimport Chapter4_1 from \"../pages/chapter4-1\";\nimport Chapter4_2 from \"../pages/chapter4-2\";\nimport Chapter4_3 from \"../pages/chapter4-3\";\nimport Chapter4_4 from \"../pages/chapter4-4\";\nimport Chapter4_5 from \"../pages/chapter4-5\";\nimport Chapter4_6 from \"../pages/chapter4-6\";\nimport Chapter5_1 from \"../pages/chapter5-1\";\nimport Chapter5_2 from \"../pages/chapter5-2\";\nimport Chapter5_3 from \"../pages/chapter5-3\";\nimport Chapter6_1 from \"../pages/chapter6-1\";\nimport Chapter6_2 from \"../pages/chapter6-2\";\nimport Chapter6_3 from \"../pages/chapter6-3\";\nimport Chapter7_1 from \"../pages/chapter7-1\";\nimport Chapter8_1 from \"../pages/chapter8-1\";\nimport Chapter9_1 from \"../pages/chapter9-1\";\nimport Chapter9_2 from \"../pages/chapter9-2\";\n\nexport const menu = [\n  {\n    label: \"1. Three.js介绍\",\n    key: \"1\",\n    children: [\n      {\n        label: \"1.1 Three.js简介\",\n        key: \"1-1\",\n        path: \"/abstract/feature\",\n        component: Chapter1_1,\n      },\n      {\n        label: \"1.2 Three.js快速上手\",\n        key: \"1-2\",\n        path: \"/abstract/firstTry\",\n        component: Chapter1_2,\n      },\n    ]\n  },\n  {\n    label: \"2. Three.js基本操作\",\n    key: \"2\",\n    children: [\n      {\n        label: \"2.1 操作物体\",\n        key: \"2-1\",\n        path: \"/basicOpt/objOpt\",\n        component: Chapter2_1,\n      },\n      {\n        label: \"2.2 基本动画操作\",\n        key: \"2-2\",\n        path: \"/basicOpt/animation\",\n        component: Chapter2_2,\n      },\n      {\n        label: \"2.3 图形界面工具\",\n        key: \"2-3\",\n        path: \"/basicOpt/gui-tool\",\n        component: Chapter2_3,\n      },\n    ]\n  },\n  {\n    label: \"3. Three.js物体\",\n    key: \"3\",\n    children: [\n      {\n        label: \"3.1 自定义几何体\",\n        key: \"3-1\",\n        path: \"/mesh/customGeometry\",\n        component: Chapter3_1,\n      },\n      {\n        label: \"3.2 随机炫酷几何体\",\n        key: \"3-2\",\n        path: \"/mesh/awesomeGeometry\",\n        component: Chapter3_2,\n      },\n    ]\n  },\n  {\n    label: \"4. 材质与纹理\",\n    key: \"4\",\n    children: [\n      {\n        label: \"4.1 加载纹理\",\n        key: \"4-1\",\n        path: \"/textures/loadTexture\",\n        component: Chapter4_1,\n      },\n      {\n        label: \"4.2 纹理变换\",\n        key: \"4-2\",\n        path: \"/textures/textureTransform\",\n        component: Chapter4_2,\n      },\n      {\n        label: \"4.3 纹理显示算法\",\n        key: \"4-3\",\n        path: \"/textures/textureMinMap\",\n        component: Chapter4_3,\n      },\n      {\n        label: \"4.4 基础材质参数\",\n        key: \"4-4\",\n        path: \"/textures/basicMaterial\",\n        component: Chapter4_4,\n      },\n      {\n        label: \"4.5 标准材质参数\",\n        key: \"4-5\",\n        path: \"/textures/standardMaterial\",\n        component: Chapter4_5,\n      },\n      {\n        label: \"4.6 环境贴图与hdr\",\n        key: \"4-6\",\n        path: \"/textures/envhdr\",\n        component: Chapter4_6,\n      },\n    ]\n  },\n  {\n    label: \"5. 光源\",\n    key: \"5\",\n    children: [\n      {\n        label: \"5.1 平行光\",\n        key: \"5-1\",\n        path: \"/light/directionalLight\",\n        component: Chapter5_1,\n      },\n      {\n        label: \"5.2 聚光灯\",\n        key: \"5-2\",\n        path: \"/light/spotLight\",\n        component: Chapter5_2,\n      },\n      {\n        label: \"5.3 点光源\",\n        key: \"5-3\",\n        path: \"/light/pointLight\",\n        component: Chapter5_3,\n      },\n    ]\n  },\n  {\n    label: \"6. 粒子特效\",\n    key: \"6\",\n    children: [\n      {\n        label: \"6.1 点材质\",\n        key: \"6-1\",\n        path: \"/particles/pointsMaterial\",\n        component: Chapter6_1,\n      },\n      {\n        label: \"6.2 自定义雪花粒子特效\",\n        key: \"6-2\",\n        path: \"/particles/customSnow\",\n        component: Chapter6_2,\n      },\n      {\n        label: \"6.3 银河系粒子特效\",\n        key: \"6-3\",\n        path: \"/particles/galaxy\",\n        component: Chapter6_3,\n      },\n    ]\n  },\n  {\n    label: \"7. 光线投射\",\n    key: \"7\",\n    children: [\n      {\n        label: \"7.1 光线投射\",\n        key: \"7-1\",\n        path: \"/raycaster\",\n        component: Chapter7_1,\n      },\n    ]\n  },\n  {\n    label: \"8. 3d全屏滚动\",\n    key: \"8\",\n    children: [\n      {\n        label: \"8.1 3d全屏滚动\",\n        key: \"8-1\",\n        path: \"/scrollFull3d\",\n        component: Chapter8_1,\n      },\n    ]\n  },\n  {\n    label: \"9. 应用物理引擎\",\n    key: \"9\",\n    children: [\n      {\n        label: \"9.1 使用cannon创建物理世界\",\n        key: \"9-1\",\n        path: \"/physics/createWorld\",\n        component: Chapter9_1,\n      },\n      {\n        label: \"9.2 模拟物理世界的相互作用力\",\n        key: \"9-2\",\n        path: \"/physics/applyForce\",\n        component: Chapter9_2,\n      },\n    ]\n  },\n  {\n    label: \"10. webgl原理\",\n    key: \"10\",\n    children: [\n      {\n        label: \"10.1 使用webgl绘制图形\",\n        key: \"10-1\",\n        path: \"/webgl/drawTriangle\",\n        component: Chapter10_1,\n      },\n      {\n        label: \"10.2 使用webgl绘制动画\",\n        key: \"10-2\",\n        path: \"/webgl/animate\",\n        component: Chapter10_2,\n      },\n    ]\n  },\n  {\n    label: \"11. 着色器编程：入门\",\n    key: \"11\",\n    children: [\n      {\n        label: \"11.1 着色器材质\",\n        key: \"11-1\",\n        path: \"/webglBasic/shaderMaterial\",\n        component: Chapter11_1,\n      },\n      {\n        label: \"11.2 原始着色器材质\",\n        key: \"11-2\",\n        path: \"/webglBasic/rawShaderMaterial\",\n        component: Chapter11_2,\n      },\n    ]\n  },\n  {\n    label: \"12. 着色器编程：进阶\",\n    key: \"12\",\n    children: [\n      {\n        label: \"12.1 着色器编写图案\",\n        key: \"12-1\",\n        path: \"/webglAdvance/basicGraph\",\n        component: Chapter12_1,\n      },\n      {\n        label: \"12.2 着色器编写飞碟\",\n        key: \"12-2\",\n        path: \"/webglAdvance/skyLanterns\",\n        component: Chapter12_2,\n      },\n    ]\n  },\n]","/*\n * @Descripttion: 选中的菜单的相关信息\n * @Author: huangjitao\n * @Date: 2021-08-04 21:35:38\n * @Function: 该文件用途描述\n */\n\nimport { useEffect } from \"react\"\nimport { useLocation } from \"react-router\"\nimport { useImmer } from \"use-immer\"\nimport { menu } from \"../consts/menu\"\n\ninterface StateProps {\n  selectedKeys: string[];\n  openKeys: string[];\n  title: string\n}\n\nexport const useSelectedMenu = () => {\n  const [state, setState] = useImmer<StateProps>({\n    selectedKeys: [],\n    openKeys: [],\n    title: ''\n  })\n  const {pathname} = useLocation()\n\n  useEffect(() => {\n    menu.forEach(item => {\n      item.children.forEach(child => {\n        if (child.path === pathname) {\n          setState(state => {\n            state.openKeys = [item.key]\n            state.selectedKeys = [child.key]\n            state.title = child.label\n          })\n        }\n      })\n    })\n  }, [pathname])\n\n  return {\n    selectedKeys: state.selectedKeys,\n    openKeys: state.openKeys,\n    title: state.title\n  }\n}","/*\n * @Descripttion: 右侧导航栏\n * @Author: huangjitao\n * @Date: 2021-08-04 21:14:56\n * @Function: 该文件用途描述\n */\n\nimport { Menu } from \"antd\";\nimport { menu } from \"../consts/menu\";\nimport { useSelectedMenu } from \"../utils/useSelectedMenu\";\nimport { useNavigate } from \"react-router\";\n\nconst { SubMenu } = Menu;\n\nconst SideMenu = () => {\n  const navigate = useNavigate()\n  const { selectedKeys } = useSelectedMenu();\n  const changeChapter = (path: string) => {\n    navigate(path)\n    setTimeout(() => {\n      window.location.reload()\n    }, 1);\n  }\n  return (\n    <Menu\n      style={{ width: \"100%\", height: \"100%\" }}\n      selectedKeys={selectedKeys}\n      mode=\"inline\"\n    >\n      {menu.map((item) => (\n        <SubMenu key={item.key} title={item.label}>\n          {item.children.map((child) => (\n            <Menu.Item key={child.key} onClick={() => changeChapter(child.path)}>\n              {child.label}\n            </Menu.Item>\n          ))}\n        </SubMenu>\n      ))}\n    </Menu>\n  );\n};\n\nexport default SideMenu;\n","/*\n * @Descripttion: 页面通用头部组件\n * @Date: 2021-08-04 22:09:56\n * @Function: 该文件用途描述\n */\n\nimport { useSelectedMenu } from \"../utils/useSelectedMenu\";\n\nconst PageHeader = () => {\n  const { title } = useSelectedMenu();\n  return (\n    <div style={{ marginLeft: 25 }}>\n      <h1 style={{ color: \"#fff\" }}>{title}</h1>\n    </div>\n  );\n};\n\nexport default PageHeader;\n","import ScrollFull3d from \"../pages/ScrollFull3d\";\n\n/*\n * @Title: 页面路由\n * @Author: huangjitao\n * @Date: 2022-10-25 14:49:49\n * @Description: 非菜单页面的路由配置\n */\nexport const pages = [\n  {\n    label: \"3d全屏滚动\",\n    key: \"pages-1\",\n    path: \"/pages/scrollFull3d\",\n    component: ScrollFull3d,\n  },\n  {\n    label: \"3d全屏滚动2\",\n    key: \"pages-2\",\n    path: \"/pages/scrollFull3d2\",\n    component: '12',\n  },\n];\n","/*\n * @Descripttion: 应用主入口\n * @Author: huangjitao\n * @Date: 2021-08-04 20:27:49\n * @Function: 该文件用途描述\n */\nimport React, { useState } from \"react\";\nimport \"./App.css\";\nimport { Layout } from \"antd\";\nimport SideMenu from \"./components/SideMunu\";\nimport { Navigate, Route, Routes, useLocation } from \"react-router-dom\";\nimport { menu } from \"./consts/menu\";\nimport PageHeader from \"./components/PageHeader\";\nimport { pages } from \"./consts/pages\";\n\nconst { Sider, Header, Content } = Layout;\n\nfunction App() {\n  const [collapsed, setCollapsed] = useState(false);\n  const onCollapse = () => {\n    setCollapsed(!collapsed);\n  };\n  const location = useLocation();\n  if (location.pathname.includes('/pages')) {\n    return (\n      <div>\n        <Routes>\n          {pages.map(item => (\n            <Route path={item.path} element={<item.component />} />\n          ))}\n        </Routes>\n      </div>\n    )\n  }\n  return (\n    <div className=\"App\">\n      <Layout style={{ height: \"100%\" }}>\n        <Sider\n          width={256}\n          collapsible\n          collapsed={collapsed}\n          onCollapse={onCollapse}\n        >\n          <SideMenu />\n        </Sider>\n        <Layout>\n          <Header>\n            <PageHeader />\n          </Header>\n          <Content>\n            <Routes>\n              {menu.map((item) => {\n                if (item.children) {\n                  return item.children.map((child) => (\n                    <Route path={child.path} element={<child.component />} />\n                  ));\n                } else {\n                  return null;\n                }\n              })}\n              <Navigate to={\"/abstract/feature\"} />\n            </Routes>\n          </Content>\n        </Layout>\n      </Layout>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","/*\n * @Descripttion: \n * @Author: huangjitao\n * @Date: 2021-08-04 20:27:49\n * @Function: 该文件用途描述\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'antd/dist/antd.css';\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}